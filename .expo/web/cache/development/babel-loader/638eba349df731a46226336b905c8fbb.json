{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"E:\\\\Projets\\\\Acadys\\\\best4sante\\\\SanteV2\\\\assets\\\\component\\\\Logout.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { AsyncStorage } from \"react-native-web/dist/index\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { SocketService } from \"../services/socket\";\n\nvar Logout = function (_React$Component) {\n  _inherits(Logout, _React$Component);\n\n  var _super = _createSuper(Logout);\n\n  function Logout(props) {\n    var _this;\n\n    _classCallCheck(this, Logout);\n\n    _this = _super.call(this, props);\n\n    _this._deconnectSocket = function _callee(key) {\n      var value, socketSrv;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem(key));\n\n            case 3:\n              value = _context.sent;\n              socketSrv = new SocketService(\"samaritain\");\n              socketSrv.emitEvent(\"status_change\", {\n                token: value,\n                socketListenId: \"samaritain_\" + value,\n                type: \"leave\"\n              });\n              _context.next = 10;\n              break;\n\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](0);\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[0, 8]], Promise);\n    };\n\n    _this._removeData = function _callee2(key) {\n      var token, value;\n      return _regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem(key));\n\n            case 3:\n              token = _context2.sent;\n              console.log('token logout ', token);\n              _context2.next = 7;\n              return _regeneratorRuntime.awrap(AsyncStorage.removeItem(key));\n\n            case 7:\n              value = _context2.sent;\n\n              if (value !== null) {\n                console.log('logout ', value);\n              } else {\n                console.log('logout, token value ', value);\n              }\n\n              _this.setState({\n                isLoading: false\n              });\n\n              _this.props.navigation.push(\"Login\");\n\n              _context2.next = 16;\n              break;\n\n            case 13:\n              _context2.prev = 13;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.log(_context2.t0);\n\n            case 16:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, [[0, 13]], Promise);\n    };\n\n    _this.state = {\n      error: null,\n      isLoading: true\n    };\n    _this.email = \"\";\n    _this.password = \"\";\n    return _this;\n  }\n\n  _createClass(Logout, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      return _regeneratorRuntime.async(function componentDidMount$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return _regeneratorRuntime.awrap(this._deconnectSocket(\"bosToken\"));\n\n            case 2:\n              this._removeData('bosToken');\n\n            case 3:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"goToLogin\",\n    value: function goToLogin() {\n      this.props.navigation.push(\"Login\");\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(View, {\n        style: styles.container,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 7\n        }\n      }, this.state.isLoading && React.createElement(View, {\n        style: styles.loading_container,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 34\n        }\n      }, React.createElement(ActivityIndicator, {\n        size: \"large\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 9\n        }\n      })), React.createElement(Text, {\n        style: {\n          color: '#FFFFFF',\n          fontWeight: '600'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 9\n        }\n      }, \"D\\xE9connexion \", \"  \"));\n    }\n  }]);\n\n  return Logout;\n}(React.Component);\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#00C1B4',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  loading_container: {\n    position: 'absolute',\n    zIndex: 10,\n    left: 0,\n    right: 0,\n    top: 100,\n    bottom: 0,\n    alignItems: 'center',\n    justifyContent: 'center'\n  }\n});\nexport default Logout;","map":{"version":3,"sources":["E:/Projets/Acadys/best4sante/SanteV2/assets/component/Logout.js"],"names":["React","AsyncStorage","SocketService","Logout","props","_deconnectSocket","key","getItem","value","socketSrv","emitEvent","token","socketListenId","type","_removeData","console","log","removeItem","setState","isLoading","navigation","push","state","error","email","password","styles","container","loading_container","color","fontWeight","Component","StyleSheet","create","flex","backgroundColor","alignItems","justifyContent","position","zIndex","left","right","top","bottom"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { StyleSheet, Text, View, AsyncStorage, ActivityIndicator } from 'react-native';\r\nimport { SocketService } from '../services/socket';\r\n\r\n\r\n\r\nclass Logout extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      error: null,\r\n      isLoading: true\r\n    }\r\n   \r\n    this.email = \"\";\r\n    this.password = \"\";\r\n  }\r\n\r\n  async componentDidMount() {\r\n    await this._deconnectSocket(\"bosToken\")\r\n    this._removeData('bosToken');\r\n    // this.goToLogin();\r\n  }\r\n\r\n  goToLogin() {\r\n    this.props.navigation.push(\"Login\")\r\n  }\r\n\r\n  _deconnectSocket = async(key) =>{\r\n    try{\r\n      const value = await AsyncStorage.getItem(key)\r\n      let socketSrv = new SocketService(\"samaritain\")\r\n      socketSrv.emitEvent(\"status_change\", { token: value, socketListenId: `samaritain_${value}`, type: \"leave\" });\r\n  \r\n    }catch(err){\r\n\r\n    }\r\n\r\n  }\r\n\r\n\r\n  _removeData = async (key) => {\r\n    try {\r\n      const token = await AsyncStorage.getItem(key);\r\n      console.log('token logout ', token);\r\n      const value = await AsyncStorage.removeItem(key);\r\n      if (value !== null) {\r\n        // We have data!!\r\n        console.log('logout ',value);\r\n      } else {\r\n        console.log('logout, token value ', value);\r\n      }\r\n      this.setState({\r\n        isLoading: false\r\n      })\r\n      this.props.navigation.push(\"Login\");\r\n    } catch (error) {\r\n        console.log(error);\r\n      // Error retrieving data\r\n    }\r\n  };\r\n\r\n  render(){\r\n    return (\r\n      <View style={styles.container}>\r\n        {this.state.isLoading && <View style={styles.loading_container}>\r\n        <ActivityIndicator size=\"large\" />\r\n        </View>}\r\n        <Text style={{color: '#FFFFFF', fontWeight: '600'}}>Déconnexion {\"  \"}</Text>\r\n      </View>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#00C1B4',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n  loading_container: {\r\n    position: 'absolute',\r\n    zIndex: 10,\r\n    left: 0,\r\n    right: 0,\r\n    top: 100,\r\n    bottom: 0,\r\n    alignItems: 'center',\r\n    justifyContent: 'center'\r\n  }\r\n});\r\n\r\nexport default Logout;"]},"metadata":{},"sourceType":"module"}