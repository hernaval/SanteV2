{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\Users\\\\Stenny Gabriel\\\\best4sante\\\\Best4Sante\\\\assets\\\\Screens\\\\Emergency.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Linking from \"react-native-web/dist/exports/Linking\";\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport TopMenu from \"../component/Menu/TopMenu\";\nimport TabBar from \"@mindinventory/react-native-tab-bar-interaction\";\nimport * as Permissions from 'expo-permissions';\nimport * as Location from 'expo-location';\nimport { emergency } from \"../API/emergency\";\nimport { widthPercentageToDP as wp, heightPercentageToDP as hp } from 'react-native-responsive-screen';\nimport { TouchableOpacity } from 'react-native-gesture-handler';\nimport Bdd from \"../API/Bdd\";\nvar API_KEY = 'AIzaSyApjuz39FHMGBsy9lo7FobJQJtZKNra8P8';\n\nvar Emergency = function (_Component) {\n  _inherits(Emergency, _Component);\n\n  var _super = _createSuper(Emergency);\n\n  function Emergency(props) {\n    var _this;\n\n    _classCallCheck(this, Emergency);\n\n    _this = _super.call(this, props);\n\n    _this.componentDidMount = function _callee() {\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(_this._getCountryCodeByLocation());\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.sendmail = function _callee2(type, msg) {\n      var data;\n      return _regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              data = {\n                user_id: _this.props.user.user.data.user[0].id\n              };\n              axios.post(Bdd.api_url + '/api/contact/all', data).then(function (res) {\n                var contacts = res.data.contacts;\n                contacts.map(function (contact) {\n                  var user = {\n                    email: contact.email\n                  };\n                  axios.post(Bdd.api_url + '/api/user/byMail', user).then(function (user) {\n                    if (user.data.user.length !== 0) {\n                      var mail = {\n                        email: user.data.user[0].email,\n                        msg: msg,\n                        type: type\n                      };\n                      axios.post(Bdd.api_url + '/api/com/sendMail', mail).then(function (response) {}).catch(function (err) {\n                        console.log('err', err);\n                      });\n                      var uuid = {\n                        token: user.data.user[0].uuid,\n                        msg: msg\n                      };\n                      axios.post(Bdd.api_url + '/api/com/notif', uuid).then(function (response) {\n                        console.log(response);\n                      }).catch(function (err) {\n                        console.log('err', err);\n                      });\n                    }\n                  }).catch(function (err) {\n                    console.log('err', err);\n                  });\n                });\n              }).catch(function (err) {\n                console.log('err', err);\n              });\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.callUrgence = function _callee3() {\n      var num, fullname;\n      return _regeneratorRuntime.async(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return _regeneratorRuntime.awrap(_this.findNumber());\n\n            case 2:\n              num = _context3.sent;\n\n              _this.callPerson(num.ambulance);\n\n              fullname = _this.props.user.user.data.user[0].firstName + \" \" + _this.props.user.user.data.user[0].lastName;\n              _context3.next = 7;\n              return _regeneratorRuntime.awrap(_this.sendmail('Ambulance', \"Attention ambulance,\" + fullname + \" votre contact d'urgence a déclenché son bouton\"));\n\n            case 7:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.callAccident = function _callee4() {\n      var num, fullname;\n      return _regeneratorRuntime.async(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              num = _this.findNumber();\n\n              _this.callPerson(num.fire);\n\n              fullname = _this.props.user.user.data.user[0].firstName + \" \" + _this.props.user.user.data.user[0].lastName;\n              _context4.next = 5;\n              return _regeneratorRuntime.awrap(_this.sendmail('Accident', \"Attention accident, \" + fullname + \" votre contact d'urgence a déclenché son bouton\"));\n\n            case 5:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.callAgression = function _callee5() {\n      var num, fullname;\n      return _regeneratorRuntime.async(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              num = _this.findNumber();\n\n              _this.callPerson(num.police);\n\n              fullname = _this.props.user.user.data.user[0].firstName + \" \" + _this.props.user.user.data.user[0].lastName;\n              _context5.next = 5;\n              return _regeneratorRuntime.awrap(_this.sendmail('Agression', \"Attention agression, \" + fullname + \" votre contact d'urgence a déclenché son bouton\"));\n\n            case 5:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.findNumber = function _callee6() {\n      var urgence, num;\n      return _regeneratorRuntime.async(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              urgence = _this.state.urgence;\n              num = {\n                ambulance: urgence[0].Ambulance.All[0],\n                fire: urgence[0].Fire.All[0],\n                police: urgence[0].Police.All[0]\n              };\n              return _context6.abrupt(\"return\", num);\n\n            case 3:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this._getCountryCodeByLocation = function _callee8() {\n      var _await$Permissions$as, status, location;\n\n      return _regeneratorRuntime.async(function _callee8$(_context8) {\n        while (1) {\n          switch (_context8.prev = _context8.next) {\n            case 0:\n              _context8.next = 2;\n              return _regeneratorRuntime.awrap(Permissions.askAsync(Permissions.LOCATION));\n\n            case 2:\n              _await$Permissions$as = _context8.sent;\n              status = _await$Permissions$as.status;\n\n              if (!(status !== 'granted')) {\n                _context8.next = 8;\n                break;\n              }\n\n              _this.setState({\n                errorMessage: 'Permission to access location was denied'\n              });\n\n              _context8.next = 12;\n              break;\n\n            case 8:\n              _context8.next = 10;\n              return _regeneratorRuntime.awrap(Location.getCurrentPositionAsync({}));\n\n            case 10:\n              location = _context8.sent;\n              axios.get(\"https://maps.googleapis.com/maps/api/geocode/json?latlng=46.5286307,6.5124095&key=\" + API_KEY).then(function _callee7(response) {\n                var globalRes, resObj, local, res;\n                return _regeneratorRuntime.async(function _callee7$(_context7) {\n                  while (1) {\n                    switch (_context7.prev = _context7.next) {\n                      case 0:\n                        globalRes = response.data.results[0].address_components;\n                        _context7.next = 3;\n                        return _regeneratorRuntime.awrap(globalRes.filter(function (el) {\n                          return el.types.includes(\"country\");\n                        }));\n\n                      case 3:\n                        resObj = _context7.sent;\n                        _context7.next = 6;\n                        return _regeneratorRuntime.awrap(resObj[0].short_name);\n\n                      case 6:\n                        local = _context7.sent;\n                        res = emergency.data.filter(function (el) {\n                          return el.Country.ISOCode == local;\n                        });\n\n                        _this.setState({\n                          urgence: res\n                        });\n\n                      case 9:\n                      case \"end\":\n                        return _context7.stop();\n                    }\n                  }\n                }, null, null, null, Promise);\n              }).catch(function (err) {\n                console.log(err);\n              });\n\n            case 12:\n            case \"end\":\n              return _context8.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    state = {\n      localCode: \"\",\n      urgence: {}\n    };\n    return _this;\n  }\n\n  _createClass(Emergency, [{\n    key: \"callPerson\",\n    value: function callPerson(phone) {\n      var url;\n\n      if (Platform.OS === 'ios') {\n        url = 'tel://' + phone;\n      } else if (Platform.OS === 'android') {\n        url = 'tel:' + phone;\n      }\n\n      Linking.canOpenURL(url).then(function (supported) {\n        if (supported) {\n          return Linking.openURL(url).catch(function () {\n            return null;\n          });\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(TabBar, {\n        bgNavBar: \"white\",\n        bgNavBarSelector: \"white\",\n        stroke: \"skyblue\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 13\n        }\n      }, React.createElement(TabBar.Item, {\n        icon: require(\"../images/accident.png\"),\n        selectedIcon: require(\"../images/accident.png\"),\n        title: \"Tab1\",\n        screenBackgroundColor: {\n          backgroundColor: '#00C1B4'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 17\n        }\n      }, React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 21\n        }\n      }, React.createElement(View, {\n        style: Platform.OS === 'ios' ? styles.under_ios : styles.under,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 25\n        }\n      }, React.createElement(TopMenu, {\n        navigation: this.props.navigation,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 29\n        }\n      })), React.createElement(View, {\n        style: styles.urgenceContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 25\n        }\n      }, React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return _this2.callAccident();\n        },\n        style: styles.urgenceBtn,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 29\n        }\n      }, React.createElement(Image, {\n        source: require(\"../images/sos.png\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 33\n        }\n      }), React.createElement(Text, {\n        style: styles.legend,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 33\n        }\n      }, \"ACCIDENT\"))))), React.createElement(TabBar.Item, {\n        icon: require(\"../images/malaise.png\"),\n        selectedIcon: require(\"../images/malaise.png\"),\n        title: \"Tab1\",\n        screenBackgroundColor: {\n          backgroundColor: '#00C1B4'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 17\n        }\n      }, React.createElement(View, {\n        style: \"emergencyContainer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 21\n        }\n      }, React.createElement(View, {\n        style: Platform.OS === 'ios' ? styles.under_ios : styles.under,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 25\n        }\n      }, React.createElement(TopMenu, {\n        navigation: this.props.navigation,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 29\n        }\n      })), React.createElement(View, {\n        style: styles.urgenceContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 25\n        }\n      }, React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return _this2.callUrgence();\n        },\n        style: styles.urgenceBtn,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 29\n        }\n      }, React.createElement(Image, {\n        source: require(\"../images/sos.png\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 29\n        }\n      })), React.createElement(Text, {\n        style: styles.legend,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 29\n        }\n      }, \"MALAISE\")))), React.createElement(TabBar.Item, {\n        icon: require(\"../images/agression.png\"),\n        selectedIcon: require(\"../images/agression.png\"),\n        title: \"Tab1\",\n        screenBackgroundColor: {\n          backgroundColor: '#00C1B4'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 17\n        }\n      }, React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 21\n        }\n      }, React.createElement(View, {\n        style: Platform.OS === 'ios' ? styles.under_ios : styles.under,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 25\n        }\n      }, React.createElement(TopMenu, {\n        navigation: this.props.navigation,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 29\n        }\n      })), React.createElement(View, {\n        style: styles.urgenceContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 25\n        }\n      }, React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return _this2.callAgression();\n        },\n        style: styles.urgenceBtn,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 25\n        }\n      }, React.createElement(Image, {\n        source: require(\"../images/sos.png\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 29\n        }\n      })), React.createElement(Text, {\n        style: styles.legend,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 29\n        }\n      }, \"AGRESSION\")))));\n    }\n  }]);\n\n  return Emergency;\n}(Component);\n\nvar styles = StyleSheet.create({\n  urgenceContainer: {\n    height: hp(\"65%\"),\n    backgroundColor: \"white\",\n    borderRadius: 50,\n    marginTop: hp(\"3%\")\n  },\n  legend: {\n    fontSize: 25,\n    fontWeight: \"800\",\n    textAlign: \"center\"\n  }\n});\n\nvar mapStateToProps = function mapStateToProps(store) {\n  return {\n    user: store.user,\n    contact: store.contact\n  };\n};\n\nvar mapDispatchToProps = {};\nexport default connect(mapStateToProps, mapDispatchToProps)(Emergency);","map":{"version":3,"sources":["C:/Users/Stenny Gabriel/best4sante/Best4Sante/assets/Screens/Emergency.js"],"names":["React","Component","connect","axios","TopMenu","TabBar","Permissions","Location","emergency","widthPercentageToDP","wp","heightPercentageToDP","hp","TouchableOpacity","Bdd","API_KEY","Emergency","props","componentDidMount","_getCountryCodeByLocation","sendmail","type","msg","data","user_id","user","id","post","api_url","then","res","contacts","map","contact","email","length","mail","response","catch","err","console","log","uuid","token","callUrgence","findNumber","num","callPerson","ambulance","fullname","firstName","lastName","callAccident","fire","callAgression","police","urgence","state","Ambulance","All","Fire","Police","askAsync","LOCATION","status","setState","errorMessage","getCurrentPositionAsync","location","get","globalRes","results","address_components","filter","el","types","includes","resObj","short_name","local","Country","ISOCode","localCode","phone","url","Platform","OS","Linking","canOpenURL","supported","openURL","require","backgroundColor","styles","under_ios","under","navigation","urgenceContainer","urgenceBtn","legend","StyleSheet","create","height","borderRadius","marginTop","fontSize","fontWeight","textAlign","mapStateToProps","store","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { Text, View, StyleSheet,Image,Linking } from 'react-native'\r\nimport { connect } from 'react-redux'\r\nimport axios from 'axios'\r\nimport TopMenu from \"../component/Menu/TopMenu\"\r\nimport TabBar from \"@mindinventory/react-native-tab-bar-interaction\";\r\nimport * as Permissions from 'expo-permissions';\r\nimport * as Location from 'expo-location';\r\nimport { emergency } from \"../API/emergency\";\r\nimport {\r\n    widthPercentageToDP as wp,\r\n    heightPercentageToDP as hp,\r\n  } from 'react-native-responsive-screen'\r\nimport { TouchableOpacity } from 'react-native-gesture-handler'\r\nimport Bdd from \"../API/Bdd\"\r\nconst API_KEY = 'AIzaSyApjuz39FHMGBsy9lo7FobJQJtZKNra8P8';\r\n\r\nclass Emergency extends Component {\r\n   \r\n    constructor(props) {\r\n        super(props)\r\n        state = {\r\n            localCode: \"\",\r\n            urgence: {}\r\n        }\r\n    }\r\n\r\n    componentDidMount = async ()  =>{\r\n      await this._getCountryCodeByLocation()\r\n    }\r\n\r\n    sendmail = async(type,msg)=>{\r\n        \r\n        let data = {\r\n            user_id: this.props.user.user.data.user[0].id\r\n        }\r\n\r\n    \r\n        axios.post(Bdd.api_url+'/api/contact/all', data )\r\n        .then((res)=>{\r\n         \r\n          let contacts = res.data.contacts;\r\n    \r\n          contacts.map((contact)=> {\r\n                let user = {\r\n                    email: contact.email\r\n                }\r\n    \r\n                axios.post(Bdd.api_url+'/api/user/byMail', user )\r\n                .then((user)=>{\r\n                   \r\n    \r\n                    if(user.data.user.length !==0) {\r\n    \r\n                      let mail = {\r\n                          email: user.data.user[0].email,\r\n                          msg: msg,\r\n                          type: type\r\n                        }\r\n    \r\n                      axios.post(Bdd.api_url+'/api/com/sendMail', mail )\r\n                        .then((response)=>{\r\n    \r\n                         \r\n                        }).catch((err)=>{\r\n                            console.log('err',err);\r\n                    \r\n                        })\r\n    \r\n                        let uuid = {\r\n                            token: user.data.user[0].uuid,\r\n                            msg: msg,\r\n                            \r\n                        }\r\n                        axios.post(Bdd.api_url+'/api/com/notif', uuid )\r\n                        .then((response)=>{\r\n    \r\n                            console.log(response)\r\n                        }).catch((err)=>{\r\n                            console.log('err',err);\r\n                    \r\n                        })\r\n    \r\n                        \r\n                        \r\n                    }\r\n                }).catch((err)=>{\r\n                    console.log('err',err);\r\n            \r\n                })\r\n          })\r\n    \r\n        }).catch((err)=>{\r\n          console.log('err',err);\r\n    \r\n        })\r\n    }\r\n\r\n    callUrgence = async () =>{\r\n      \r\n      \r\n     let num = await   this.findNumber()\r\n\r\n        \r\n        \r\n        this.callPerson(num.ambulance)  \r\n        let fullname = this.props.user.user.data.user[0].firstName+\" \"+this.props.user.user.data.user[0].lastName\r\n        await this.sendmail('Ambulance', \"Attention ambulance,\" +fullname+ \" votre contact d'urgence a déclenché son bouton\") \r\n    }\r\n    callAccident = async () =>{\r\n        let num =  this.findNumber()\r\n        this.callPerson(num.fire)\r\n        let fullname = this.props.user.user.data.user[0].firstName+\" \"+this.props.user.user.data.user[0].lastName\r\n\r\n        await this.sendmail('Accident', \"Attention accident, \" +fullname+ \" votre contact d'urgence a déclenché son bouton\") \r\n    }\r\n\r\n    callAgression = async () =>{\r\n        let num =  this.findNumber()\r\n        this.callPerson(num.police)\r\n        let fullname = this.props.user.user.data.user[0].firstName+\" \"+this.props.user.user.data.user[0].lastName\r\n\r\n        await this.sendmail('Agression', \"Attention agression, \" +fullname+ \" votre contact d'urgence a déclenché son bouton\") \r\n    }\r\n\r\n    findNumber = async  () =>{\r\n        let urgence = this.state.urgence\r\n\r\n\r\n        const num = {\r\n            ambulance : urgence[0].Ambulance.All[0],\r\n            fire : urgence[0].Fire.All[0],\r\n            police : urgence[0].Police.All[0]\r\n        }\r\n        return num\r\n    }\r\n\r\n    callPerson(phone){\r\n        let url;\r\n        if(Platform.OS === 'ios') {\r\n          url  = 'tel://'+phone\r\n        }\r\n        else if(Platform.OS === 'android') {\r\n            url = 'tel:'+phone\r\n            \r\n        }\r\n    \r\n        Linking.canOpenURL(url)\r\n          .then((supported) => {\r\n            if (supported) {\r\n              return Linking.openURL(url)\r\n                .catch(() => null);\r\n            }\r\n          });\r\n        \r\n    }\r\n    \r\n   \r\n    _getCountryCodeByLocation = async () => {\r\n        let { status } = await Permissions.askAsync(Permissions.LOCATION);\r\n        if (status !== 'granted') {\r\n            this.setState({\r\n                errorMessage: 'Permission to access location was denied',\r\n            });\r\n        }else{\r\n            let location = await Location.getCurrentPositionAsync({});\r\n        \r\n\r\n            axios.get(\"https://maps.googleapis.com/maps/api/geocode/json?latlng=46.5286307,6.5124095&key=\" + API_KEY)\r\n\r\n      //  axios.get(\"https://maps.googleapis.com/maps/api/geocode/json?latlng=\" + location.coords.latitude + \",\" + location.coords.longitude + \"&key=\" + API_KEY)\r\n            .then(async response => {\r\n                const globalRes = response.data.results[0].address_components\r\n               \r\n                let resObj = await globalRes.filter(el => {\r\n                    return el.types.includes(\"country\")\r\n                })\r\n                const local = await resObj[0].short_name\r\n               let res= emergency.data.filter(el =>{\r\n                   return el.Country.ISOCode == local\r\n               })\r\n\r\n               this.setState({\r\n                   urgence : res\r\n               })\r\n\r\n\r\n\r\n            })\r\n            .catch(err =>{\r\n                console.log(err)\r\n            })\r\n        }\r\n\r\n        \r\n\r\n    };\r\n    render() {\r\n\r\n\r\n        return (\r\n\r\n            <TabBar bgNavBar=\"white\" bgNavBarSelector=\"white\" stroke=\"skyblue\">\r\n\r\n                <TabBar.Item\r\n\r\n                    icon={require(`../images/accident.png`)}\r\n                    selectedIcon={require(`../images/accident.png`)}\r\n                    title=\"Tab1\"\r\n                    screenBackgroundColor={{ backgroundColor: '#00C1B4' }}\r\n                >\r\n                    <View>\r\n                        <View style={Platform.OS === 'ios' ? styles.under_ios : styles.under}>\r\n                            <TopMenu navigation={this.props.navigation} />\r\n                        </View>\r\n                        <View style={styles.urgenceContainer}>\r\n                            <TouchableOpacity onPress={()=> this.callAccident()} style={styles.urgenceBtn}>\r\n                                <Image source={require(\"../images/sos.png\")} />\r\n                                <Text  style={styles.legend}>ACCIDENT</Text>\r\n                            </TouchableOpacity>\r\n                            \r\n                        </View>\r\n                    </View>\r\n                </TabBar.Item>\r\n\r\n                <TabBar.Item\r\n\r\n                    icon={require(`../images/malaise.png`)}\r\n                    selectedIcon={require(`../images/malaise.png`)}\r\n                    title=\"Tab1\"\r\n                    screenBackgroundColor={{ backgroundColor: '#00C1B4' }}\r\n                >\r\n                    <View style=\"emergencyContainer\">\r\n                        <View style={Platform.OS === 'ios' ? styles.under_ios : styles.under}>\r\n                            <TopMenu navigation={this.props.navigation} />\r\n                        </View>\r\n                        <View style={styles.urgenceContainer}>\r\n                            <TouchableOpacity onPress={()=> this.callUrgence()} style={styles.urgenceBtn}>\r\n                            <Image source={require(\"../images/sos.png\")} />\r\n                            </TouchableOpacity>\r\n                            <Text  style={styles.legend}>MALAISE</Text>\r\n                        </View>\r\n                        \r\n                    </View>\r\n                </TabBar.Item>\r\n\r\n                <TabBar.Item\r\n\r\n                    icon={require(`../images/agression.png`)}\r\n                    selectedIcon={require(`../images/agression.png`)}\r\n                    title=\"Tab1\"\r\n                    screenBackgroundColor={{ backgroundColor: '#00C1B4' }}\r\n                >\r\n                    <View>\r\n                        <View style={Platform.OS === 'ios' ? styles.under_ios : styles.under}>\r\n                            <TopMenu navigation={this.props.navigation} />\r\n                        </View>\r\n                        <View style={styles.urgenceContainer}>\r\n                        <TouchableOpacity onPress={()=> this.callAgression()} style={styles.urgenceBtn}>\r\n                            <Image source={require(\"../images/sos.png\")} />\r\n                            </TouchableOpacity>\r\n                            <Text  style={styles.legend}>AGRESSION</Text>\r\n                            \r\n                        </View>\r\n                    </View>\r\n                </TabBar.Item>\r\n\r\n            </TabBar>\r\n\r\n        )\r\n    }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    urgenceContainer : {\r\n        height : hp(\"65%\"),\r\n        backgroundColor : \"white\",\r\n        borderRadius : 50,\r\n        marginTop : hp(\"3%\")\r\n    },\r\n    legend : {\r\n        fontSize : 25,\r\n        fontWeight : \"800\",\r\n        textAlign : \"center\"\r\n    }\r\n})\r\n\r\nconst mapStateToProps = (store) => {\r\n    return {\r\n        user: store.user,\r\n        contact: store.contact\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n\r\n}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Emergency)\r\n\r\n"]},"metadata":{},"sourceType":"module"}