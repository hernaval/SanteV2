{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\Users\\\\Stenny Gabriel\\\\best4sante\\\\Best4Sante\\\\assets\\\\component\\\\forgot.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport AsyncStorage from \"react-native-web/dist/exports/AsyncStorage\";\nimport Keyboard from \"react-native-web/dist/exports/Keyboard\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { Button, withTheme } from 'react-native-elements';\nimport Bdd from \"../API/Bdd\";\nimport { widthPercentageToDP as wp, heightPercentageToDP as hp } from 'react-native-responsive-screen';\nimport axios from 'axios';\nimport { registerForPushNotificationsAsync } from \"../services/notifications\";\nimport Header from \"./Menu/Header\";\nimport { connect } from 'react-redux';\n\nvar Forgot = function (_React$Component) {\n  _inherits(Forgot, _React$Component);\n\n  var _super = _createSuper(Forgot);\n\n  function Forgot(props) {\n    var _this;\n\n    _classCallCheck(this, Forgot);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      error: null,\n      isLoading: false\n    };\n    _this.currentPass = \"\";\n    _this.pass = \"\";\n    _this.confirmPass = \"\";\n    return _this;\n  }\n\n  _createClass(Forgot, [{\n    key: \"gotToLogin\",\n    value: function gotToLogin() {\n      this.props.navigation.push(\"Login\");\n    }\n  }, {\n    key: \"onChangeInput\",\n    value: function onChangeInput(text, type) {\n      this[type] = text;\n    }\n  }, {\n    key: \"sendForgot\",\n    value: function sendForgot() {\n      var _this2 = this;\n\n      if (this.pass !== this.confirmPass) {\n        this.setState({\n          error: \"Confirmation mot de passe non identique\"\n        });\n        this.pass = \"\", this.confirmPass = \"\";\n      } else {\n        var data = {\n          actualPass: this.currentPass,\n          passwordUser: this.pass\n        };\n        console.log(data.actualPass);\n        var idUser = this.props.user.user.idUser;\n        this.setState({\n          isLoading: true\n        });\n        axios.put(Bdd.api_url + \"/\" + idUser + \"/reset-password\", data).then(function (res) {\n          console.log(res.data.message);\n\n          _this2.setState({\n            isLoading: false\n          });\n\n          switch (res.data.message) {\n            case \"pas le droit\":\n              _this2.setState({\n                error: \"mot de passe incorrect\"\n              });\n\n              break;\n\n            case \"use another\":\n              _this2.setState({\n                error: \"trouver un autre mot de passe que l'actuel\"\n              });\n\n              break;\n\n            default:\n              _this2.currentPass = \"\";\n              _this2.pass = \"\", _this2.confirmPass = \"\";\n          }\n        }).catch(function (err) {\n          console.log('err', err);\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(View, {\n        style: styles.container,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 7\n        }\n      }, this.state.isLoading && React.createElement(View, {\n        style: styles.loading_container,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 34\n        }\n      }, React.createElement(ActivityIndicator, {\n        size: \"large\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }\n      })), React.createElement(View, {\n        style: styles.header,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 9\n        }\n      }, React.createElement(View, {\n        style: styles.center,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }\n      }, React.createElement(Image, {\n        style: {\n          marginLeft: wp('10%'),\n          width: wp('35%'),\n          height: wp('35%'),\n          backgroundColor: 'white',\n          borderRadius: 400 / 2\n        },\n        source: require(\"../images/icon_point.jpeg\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 13\n        }\n      })), this.state.error !== null && React.createElement(Text, {\n        style: (styles.center, styles.red),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 41\n        }\n      }, this.state.error)), React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 9\n        }\n      }, React.createElement(TextInput, {\n        style: styles.textinput,\n        onChangeText: function onChangeText(text) {\n          return _this3.currentPass = text;\n        },\n        secureTextEntry: true,\n        placeholder: \"Mot de passe actuel\",\n        autoCapitalize: \"none\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }\n      }), React.createElement(TextInput, {\n        style: styles.textinput,\n        onChangeText: function onChangeText(text) {\n          return _this3.pass = text;\n        },\n        secureTextEntry: true,\n        placeholder: \"Nouveau mot de passe\",\n        autoCapitalize: \"none\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }\n      }), React.createElement(TextInput, {\n        style: styles.textinput,\n        onChangeText: function onChangeText(text) {\n          return _this3.confirmPass = text;\n        },\n        secureTextEntry: true,\n        placeholder: \"Confirmer nouveau mot de passe\",\n        autoCapitalize: \"none\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }\n      }), React.createElement(TouchableOpacity, {\n        style: styles.buttonStyle,\n        onPress: function onPress(e) {\n          _this3.sendForgot();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }\n      }, React.createElement(Text, {\n        style: styles.buttonText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 13\n        }\n      }, \"R\\xE9initialiser\"))), React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 9\n        }\n      }, React.createElement(Text, {\n        style: styles.footer,\n        onPress: function onPress(e) {\n          _this3.gotToLogin();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }\n      }, \"D\\xE9j\\xE0 un compte ?\")));\n    }\n  }]);\n\n  return Forgot;\n}(React.Component);\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    backgroundColor: '#00C1B4'\n  },\n  under: {\n    flex: 1,\n    maxHeight: hp('10%')\n  },\n  header: {\n    textAlign: 'center'\n  },\n  center: {\n    textAlign: 'center',\n    color: \"white\",\n    fontSize: 21,\n    marginTop: hp('10%')\n  },\n  red: {\n    color: 'red'\n  },\n  body: {\n    flex: 1,\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  textinput: {\n    marginLeft: 5,\n    marginRight: 5,\n    height: 50,\n    width: wp(\"70%\"),\n    paddingLeft: 15,\n    backgroundColor: 'white',\n    borderRadius: 1,\n    marginBottom: hp('2%')\n  },\n  footer: {\n    textAlign: 'center',\n    textDecorationLine: 'underline',\n    paddingTop: 15,\n    paddingBottom: 15,\n    paddingLeft: 15,\n    paddingRight: 15,\n    color: \"white\"\n  },\n  normalText: {\n    color: \"white\"\n  },\n  title2: {\n    color: \"white\",\n    marginBottom: hp('2%'),\n    marginTop: hp('5%'),\n    textAlign: \"center\"\n  },\n  buttonStyle: {\n    marginTop: hp(\"2%\"),\n    width: wp(\"70%\"),\n    borderColor: 'red',\n    backgroundColor: \"#00C1B4\",\n    paddingTop: hp('2%'),\n    paddingBottom: hp('2%'),\n    borderRadius: 10,\n    marginBottom: hp(\"2%\"),\n    borderWidth: 1,\n    borderRadius: 2,\n    borderColor: '#029B95',\n    borderTopWidth: 0,\n    borderLeftWidth: 0,\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.8,\n    shadowRadius: 2,\n    elevation: 1\n  },\n  buttonText: {\n    color: 'white',\n    textAlign: \"center\",\n    fontSize: 16\n  },\n  loading_container: {\n    position: 'absolute',\n    zIndex: 10,\n    left: 0,\n    right: 0,\n    top: 100,\n    bottom: 0,\n    alignItems: 'center',\n    justifyContent: 'center'\n  }\n});\n\nvar mapStateToProps = function mapStateToProps(store) {\n  return {\n    user: store.user,\n    contact: store.contact\n  };\n};\n\nvar mapDispatchToProps = {};\nexport default connect(mapStateToProps, mapDispatchToProps)(Forgot);","map":{"version":3,"sources":["C:/Users/Stenny Gabriel/best4sante/Best4Sante/assets/component/forgot.js"],"names":["React","Button","withTheme","Bdd","widthPercentageToDP","wp","heightPercentageToDP","hp","axios","registerForPushNotificationsAsync","Header","connect","Forgot","props","state","error","isLoading","currentPass","pass","confirmPass","navigation","push","text","type","setState","data","actualPass","passwordUser","console","log","idUser","user","put","api_url","then","res","message","catch","err","styles","container","loading_container","header","center","marginLeft","width","height","backgroundColor","borderRadius","require","red","textinput","buttonStyle","e","sendForgot","buttonText","footer","gotToLogin","Component","StyleSheet","create","flex","alignItems","under","maxHeight","textAlign","color","fontSize","marginTop","body","justifyContent","marginRight","paddingLeft","marginBottom","textDecorationLine","paddingTop","paddingBottom","paddingRight","normalText","title2","borderColor","borderWidth","borderTopWidth","borderLeftWidth","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation","position","zIndex","left","right","top","bottom","mapStateToProps","store","contact","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { StyleSheet, Text, View, TextInput, AsyncStorage, Keyboard, TouchableOpacity, ActivityIndicator, Image } from 'react-native';\r\nimport { Button, withTheme } from 'react-native-elements';\r\nimport Bdd from '../API/Bdd'\r\nimport {\r\n  widthPercentageToDP as wp,\r\n  heightPercentageToDP as hp,\r\n} from 'react-native-responsive-screen';\r\nimport axios from 'axios';\r\nimport { registerForPushNotificationsAsync } from '../services/notifications';\r\nimport Header from './Menu/Header'\r\nimport { connect } from 'react-redux';\r\n\r\n\r\nclass Forgot extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      error: null,\r\n      isLoading: false\r\n    }\r\n\r\n    this.currentPass = \"\"\r\n    this.pass = \"\"\r\n    this.confirmPass = \"\"\r\n  }\r\n\r\n  gotToLogin() {\r\n    this.props.navigation.push(\"Login\")\r\n  }\r\n\r\n  onChangeInput(text, type) {\r\n    this[type] = text;\r\n  }\r\n\r\n\r\n  sendForgot() {\r\n\r\n    if (this.pass !== this.confirmPass) {\r\n      this.setState({ error: \"Confirmation mot de passe non identique\" })\r\n      this.pass = \"\",\r\n      this.confirmPass = \"\"\r\n    } else {\r\n      let data = {\r\n        actualPass: this.currentPass,\r\n        passwordUser: this.pass\r\n      }\r\n      console.log(data.actualPass)\r\n       let idUser = this.props.user.user.idUser\r\n      this.setState({ isLoading: true });\r\n      axios.put(`${Bdd.api_url}/${idUser}/reset-password`, data)\r\n        .then((res) => {\r\n          //  console.log(res);\r\n          console.log(res.data.message)\r\n          this.setState({ isLoading: false });\r\n          switch (res.data.message) {\r\n            case \"pas le droit\":\r\n              this.setState({ error: \"mot de passe incorrect\" })\r\n              break\r\n            case \"use another\":\r\n              this.setState({ error: \"trouver un autre mot de passe que l'actuel\" })\r\n              break\r\n            default:\r\n              this.currentPass = \"\"\r\n              this.pass = \"\",\r\n                this.confirmPass = \"\"\r\n\r\n          }\r\n        }).catch((err) => {\r\n          console.log('err', err);\r\n\r\n        })\r\n    }\r\n\r\n  }\r\n\r\n\r\n  render() {\r\n    return (\r\n      <View style={styles.container}>\r\n        {this.state.isLoading && <View style={styles.loading_container}>\r\n          <ActivityIndicator size='large' />\r\n        </View>}\r\n        <View style={styles.header}>\r\n          <View style={styles.center}>\r\n            <Image\r\n              style={{ marginLeft: wp('10%'), width: wp('35%'), height: wp('35%'), backgroundColor: 'white', borderRadius: 400 / 2 }}\r\n              source={require('../images/icon_point.jpeg')}\r\n            />\r\n          </View>\r\n\r\n          {this.state.error !== null && <Text style={styles.center, styles.red}>{this.state.error}</Text>}\r\n        </View>\r\n        <View >\r\n\r\n          <TextInput\r\n            style={styles.textinput}\r\n            onChangeText={(text) => this.currentPass = text}\r\n            secureTextEntry={true}\r\n            placeholder=\"Mot de passe actuel\"\r\n            autoCapitalize='none'\r\n          //onSubmitEditing={() => this._searchFilms()}\r\n          />\r\n          <TextInput\r\n            style={styles.textinput}\r\n            onChangeText={(text) => this.pass = text}\r\n            secureTextEntry={true}\r\n            placeholder=\"Nouveau mot de passe\"\r\n            autoCapitalize='none'\r\n\r\n          //onSubmitEditing={() => this._searchFilms()}\r\n          />\r\n          <TextInput\r\n            style={styles.textinput}\r\n            onChangeText={(text) => this.confirmPass = text}\r\n            secureTextEntry={true}\r\n            placeholder=\"Confirmer nouveau mot de passe\"\r\n            autoCapitalize='none'\r\n          //onSubmitEditing={() => this._searchFilms()}\r\n          />\r\n          <TouchableOpacity\r\n            style={styles.buttonStyle}\r\n            onPress={(e) => { this.sendForgot() }}\r\n          >\r\n            <Text style={styles.buttonText}>Réinitialiser</Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n        <View>\r\n          <Text\r\n            style={styles.footer}\r\n            onPress={(e) => {\r\n              this.gotToLogin();\r\n            }}\r\n          >\r\n            Déjà un compte ?\r\n          </Text>\r\n        </View>\r\n      </View>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    alignItems: 'center',\r\n    backgroundColor: '#00C1B4'\r\n  },\r\n  under: {\r\n    flex: 1,\r\n    maxHeight: hp('10%'),\r\n  },\r\n  header: {\r\n\r\n    textAlign: 'center'\r\n  },\r\n  center: {\r\n    textAlign: 'center',\r\n    color: \"white\",\r\n    fontSize: 21,\r\n    marginTop: hp('10%')\r\n  },\r\n  red: {\r\n    color: 'red'\r\n  },\r\n  body: {\r\n    flex: 1,\r\n    backgroundColor: '#fff',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n  textinput: {\r\n    marginLeft: 5,\r\n    marginRight: 5,\r\n    height: 50,\r\n    width: wp(\"70%\"),\r\n    paddingLeft: 15,\r\n    backgroundColor: 'white',\r\n    borderRadius: 1,\r\n    marginBottom: hp('2%')\r\n  },\r\n  footer: {\r\n\r\n    textAlign: 'center',\r\n    textDecorationLine: 'underline',\r\n    paddingTop: 15,\r\n    paddingBottom: 15,\r\n    paddingLeft: 15,\r\n    paddingRight: 15,\r\n    color: \"white\"\r\n  },\r\n  normalText: {\r\n    color: \"white\"\r\n  },\r\n  title2: {\r\n    color: \"white\",\r\n    marginBottom: hp('2%'),\r\n    marginTop: hp('5%'),\r\n    textAlign: \"center\"\r\n  },\r\n  buttonStyle: {\r\n    marginTop: hp(\"2%\"),\r\n    width: wp(\"70%\"),\r\n    borderColor: 'red',\r\n    backgroundColor: \"#00C1B4\",\r\n    paddingTop: hp('2%'),\r\n    paddingBottom: hp('2%'),\r\n    borderRadius: 10,\r\n    marginBottom: hp(\"2%\"),\r\n    borderWidth: 1,\r\n    borderRadius: 2,\r\n    borderColor: '#029B95',\r\n    borderTopWidth: 0,\r\n    borderLeftWidth: 0,\r\n    shadowColor: '#000',\r\n    shadowOffset: { width: 0, height: 2 },\r\n    shadowOpacity: 0.8,\r\n    shadowRadius: 2,\r\n    elevation: 1,\r\n  },\r\n  buttonText: {\r\n    color: 'white',\r\n    textAlign: \"center\",\r\n    fontSize: 16\r\n  },\r\n  loading_container: {\r\n    position: 'absolute',\r\n    zIndex: 10,\r\n    left: 0,\r\n    right: 0,\r\n    top: 100,\r\n    bottom: 0,\r\n    alignItems: 'center',\r\n    justifyContent: 'center'\r\n  }\r\n});\r\n\r\nconst mapStateToProps = (store) => {\r\n  return {\r\n      user: store.user,\r\n      contact: store.contact,\r\n      /* favorite: store.favorite,\r\n      second: store.second */\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  \r\n}\r\n\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(Forgot);"]},"metadata":{},"sourceType":"module"}