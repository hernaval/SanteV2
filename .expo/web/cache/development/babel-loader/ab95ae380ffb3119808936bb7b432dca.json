{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"E:\\\\Projets\\\\Acadys\\\\best4sante\\\\SanteV2\\\\assets\\\\component\\\\forgot.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { AsyncStorage } from \"react-native-web/dist/index\";\nimport Keyboard from \"react-native-web/dist/exports/Keyboard\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { Button, withTheme } from 'react-native-elements';\nimport Bdd from \"../API/Bdd\";\nimport { widthPercentageToDP as wp, heightPercentageToDP as hp } from 'react-native-responsive-screen';\nimport axios from 'axios';\nimport { registerForPushNotificationsAsync } from \"../services/notifications\";\nimport Header from \"./Menu/Header\";\nimport { connect } from 'react-redux';\nimport { TextInput } from 'react-native-paper';\nimport { faSearch } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-native-fontawesome';\nimport TopMenu from \"./Menu/TopMenu\";\nimport HeaderMenu from \"./Menu/HeaderMenu\";\n\nvar Forgot = function (_React$Component) {\n  _inherits(Forgot, _React$Component);\n\n  var _super = _createSuper(Forgot);\n\n  function Forgot(props) {\n    var _this;\n\n    _classCallCheck(this, Forgot);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      error: null,\n      errDroit: null,\n      errNew: null,\n      errConfirm: null,\n      isLoading: false\n    };\n    _this.currentPass = \"\";\n    _this.pass = \"\";\n    _this.confirmPass = \"\";\n    return _this;\n  }\n\n  _createClass(Forgot, [{\n    key: \"gotToLogin\",\n    value: function gotToLogin() {\n      this.props.navigation.push(\"Login\");\n    }\n  }, {\n    key: \"onChangeInput\",\n    value: function onChangeInput(text, type) {\n      this[type] = text;\n    }\n  }, {\n    key: \"sendForgot\",\n    value: function sendForgot() {\n      var _this2 = this;\n\n      if (this.pass !== this.confirmPass) {\n        this.setState({\n          error: \"Confirmation mot de passe non identique\",\n          errConfirm: \"Mot de passe non identique\",\n          errNew: \"Mot de passe non identique\"\n        });\n        this.pass = \"\", this.confirmPass = \"\";\n      } else {\n        var data = {\n          actualPass: this.currentPass,\n          passwordUser: this.pass\n        };\n        console.log(data.actualPass);\n        var idUser = this.props.user.user.idUser;\n        this.setState({\n          isLoading: true\n        });\n        axios.put(Bdd.api_url + \"/\" + idUser + \"/reset-password\", data).then(function (res) {\n          console.log(res.data.message);\n\n          _this2.setState({\n            isLoading: false\n          });\n\n          switch (res.data.message) {\n            case \"pas le droit\":\n              _this2.setState({\n                error: \"mot de passe incorrect\",\n                errConfirm: \"mot de passe incorrect\"\n              });\n\n              break;\n\n            case \"use another\":\n              _this2.setState({\n                error: \"trouver un autre mot de passe que l'actuel\",\n                errNew: \"Trouver un autre que l'actuel\"\n              });\n\n              break;\n\n            default:\n              _this2.currentPass = \"\";\n              _this2.pass = \"\", _this2.confirmPass = \"\";\n          }\n        }).catch(function (err) {\n          console.log('err', err);\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(View, {\n        style: styles.container,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 7\n        }\n      }, this.state.isLoading && React.createElement(View, {\n        style: styles.loading_container,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 34\n        }\n      }, React.createElement(ActivityIndicator, {\n        size: \"large\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }\n      })), React.createElement(View, {\n        style: Platform.OS === 'ios' ? styles.under_ios : styles.under,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 9\n        }\n      }, React.createElement(HeaderMenu, {\n        navigation: this.props.navigation,\n        forgot: 1,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }\n      })), React.createElement(View, {\n        style: {\n          marginTop: 0,\n          flex: 1,\n          justifyContent: 'center',\n          alignItems: 'center'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 9\n        }\n      }, React.createElement(Text, {\n        style: {\n          textAlign: \"center\",\n          fontWeight: \"bold\",\n          fontSize: 23\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }\n      }, \"Changer de mot passe \"), React.createElement(Image, {\n        source: require(\"../images/reset.png\"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }\n      })), React.createElement(View, {\n        style: {\n          flex: 1,\n          justifyContent: \"center\",\n          marginLeft: 20,\n          marginRight: 20,\n          marginTop: -150\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 9\n        }\n      }, React.createElement(TextInput, {\n        style: {\n          marginBottom: 20,\n          backgroundColor: \"white\"\n        },\n        onChangeText: function onChangeText(text) {\n          return _this3.currentPass = text;\n        },\n        secureTextEntry: true,\n        label: \"Mot de passe actuel\",\n        autoCapitalize: \"none\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }\n      }), React.createElement(TextInput, {\n        style: {\n          marginBottom: 20,\n          backgroundColor: \"white\"\n        },\n        onChangeText: function onChangeText(text) {\n          return _this3.pass = text;\n        },\n        secureTextEntry: true,\n        label: \"Nouveau mot de passe\",\n        autoCapitalize: \"none\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 11\n        }\n      }), React.createElement(TextInput, {\n        style: {\n          marginBottom: 20,\n          backgroundColor: \"white\"\n        },\n        onChangeText: function onChangeText(text) {\n          return _this3.confirmPass = text;\n        },\n        secureTextEntry: true,\n        label: \"Confirmer nouveau mot de passe\",\n        autoCapitalize: \"none\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }\n      })), React.createElement(View, {\n        style: {\n          marginVertical: hp(\"2%\"),\n          marginHorizontal: wp(\"2%\")\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 9\n        }\n      }, React.createElement(TouchableOpacity, {\n        style: {\n          padding: 20,\n          backgroundColor: \"#00C1B4\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }\n      }, React.createElement(Text, {\n        style: {\n          textAlign: \"center\",\n          color: \"white\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 13\n        }\n      }, \"Valider\"))));\n    }\n  }]);\n\n  return Forgot;\n}(React.Component);\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: \"center\",\n    backgroundColor: 'white'\n  },\n  under: {\n    flex: 1,\n    maxHeight: hp('10%')\n  },\n  header: {\n    textAlign: 'center'\n  },\n  center: {\n    textAlign: 'center',\n    color: \"white\",\n    fontSize: 21,\n    marginTop: hp('10%')\n  },\n  red: {\n    color: 'red'\n  },\n  body: {\n    flex: 1,\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  textinput: {\n    marginLeft: 5,\n    marginRight: 5,\n    height: 50,\n    width: wp(\"70%\"),\n    paddingLeft: 15,\n    backgroundColor: 'white',\n    borderRadius: 1,\n    marginBottom: hp('2%')\n  },\n  footer: {\n    textAlign: 'center',\n    textDecorationLine: 'underline',\n    paddingTop: 15,\n    paddingBottom: 15,\n    paddingLeft: 15,\n    paddingRight: 15,\n    color: \"white\"\n  },\n  normalText: {\n    color: \"white\"\n  },\n  title2: {\n    color: \"white\",\n    marginBottom: hp('2%'),\n    marginTop: hp('5%'),\n    textAlign: \"center\"\n  },\n  buttonStyle: {\n    width: wp(\"70%\"),\n    backgroundColor: \"#00C1B4\",\n    paddingTop: hp('2%'),\n    paddingBottom: hp('2%'),\n    borderRadius: 10,\n    marginBottom: hp(\"2%\"),\n    borderWidth: 1,\n    borderRadius: 2,\n    borderColor: '#029B95',\n    borderTopWidth: 0,\n    borderLeftWidth: 0,\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.8,\n    shadowRadius: 2,\n    elevation: 1\n  },\n  buttonText: {\n    color: 'white',\n    textAlign: \"center\",\n    fontSize: 16\n  },\n  loading_container: {\n    position: 'absolute',\n    zIndex: 10,\n    left: 0,\n    right: 0,\n    top: 100,\n    bottom: 0,\n    alignItems: 'center',\n    justifyContent: 'center'\n  }\n});\n\nvar mapStateToProps = function mapStateToProps(store) {\n  return {\n    user: store.user,\n    contact: store.contact\n  };\n};\n\nvar mapDispatchToProps = {};\nexport default connect(mapStateToProps, mapDispatchToProps)(Forgot);","map":{"version":3,"sources":["E:/Projets/Acadys/best4sante/SanteV2/assets/component/forgot.js"],"names":["React","AsyncStorage","Button","withTheme","Bdd","widthPercentageToDP","wp","heightPercentageToDP","hp","axios","registerForPushNotificationsAsync","Header","connect","TextInput","faSearch","FontAwesomeIcon","TopMenu","HeaderMenu","Forgot","props","state","error","errDroit","errNew","errConfirm","isLoading","currentPass","pass","confirmPass","navigation","push","text","type","setState","data","actualPass","passwordUser","console","log","idUser","user","put","api_url","then","res","message","catch","err","styles","container","loading_container","Platform","OS","under_ios","under","marginTop","flex","justifyContent","alignItems","textAlign","fontWeight","fontSize","require","marginLeft","marginRight","marginBottom","backgroundColor","marginVertical","marginHorizontal","padding","color","Component","StyleSheet","create","maxHeight","header","center","red","body","textinput","height","width","paddingLeft","borderRadius","footer","textDecorationLine","paddingTop","paddingBottom","paddingRight","normalText","title2","buttonStyle","borderWidth","borderColor","borderTopWidth","borderLeftWidth","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation","buttonText","position","zIndex","left","right","top","bottom","mapStateToProps","store","contact","mapDispatchToProps"],"mappings":";;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;;;;SACiCC,Y;;;;;AACjC,SAASC,MAAT,EAAiBC,SAAjB,QAAkC,uBAAlC;AACA,OAAOC,GAAP;AACA,SACEC,mBAAmB,IAAIC,EADzB,EAEEC,oBAAoB,IAAIC,EAF1B,QAGO,gCAHP;AAIA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,iCAAT;AACA,OAAOC,MAAP;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,SAAT,QAA0B,oBAA1B;AACA,SAASC,QAAT,QAAyB,mCAAzB;AACA,SAASC,eAAT,QAAgC,uCAAhC;AACA,OAAOC,OAAP;AACA,OAAOC,UAAP;;IAEMC,M;;;;;AAEJ,kBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,8BAAMA,KAAN;AACA,UAAKC,KAAL,GAAa;AACXC,MAAAA,KAAK,EAAE,IADI;AAEXC,MAAAA,QAAQ,EAAG,IAFA;AAGXC,MAAAA,MAAM,EAAG,IAHE;AAIXC,MAAAA,UAAU,EAAG,IAJF;AAKXC,MAAAA,SAAS,EAAE;AALA,KAAb;AAQA,UAAKC,WAAL,GAAmB,EAAnB;AACA,UAAKC,IAAL,GAAY,EAAZ;AACA,UAAKC,WAAL,GAAmB,EAAnB;AAZiB;AAalB;;;;iCAEY;AACX,WAAKT,KAAL,CAAWU,UAAX,CAAsBC,IAAtB,CAA2B,OAA3B;AACD;;;kCAEaC,I,EAAMC,I,EAAM;AACxB,WAAKA,IAAL,IAAaD,IAAb;AACD;;;iCAGY;AAAA;;AAEX,UAAI,KAAKJ,IAAL,KAAc,KAAKC,WAAvB,EAAoC;AAClC,aAAKK,QAAL,CAAc;AAAEZ,UAAAA,KAAK,EAAE,yCAAT;AAAoDG,UAAAA,UAAU,EAAG,4BAAjE;AAA8FD,UAAAA,MAAM,EAAE;AAAtG,SAAd;AACA,aAAKI,IAAL,GAAY,EAAZ,EACE,KAAKC,WAAL,GAAmB,EADrB;AAED,OAJD,MAIO;AACL,YAAIM,IAAI,GAAG;AACTC,UAAAA,UAAU,EAAE,KAAKT,WADR;AAETU,UAAAA,YAAY,EAAE,KAAKT;AAFV,SAAX;AAIAU,QAAAA,OAAO,CAACC,GAAR,CAAYJ,IAAI,CAACC,UAAjB;AACA,YAAII,MAAM,GAAG,KAAKpB,KAAL,CAAWqB,IAAX,CAAgBA,IAAhB,CAAqBD,MAAlC;AACA,aAAKN,QAAL,CAAc;AAAER,UAAAA,SAAS,EAAE;AAAb,SAAd;AACAhB,QAAAA,KAAK,CAACgC,GAAN,CAAarC,GAAG,CAACsC,OAAjB,SAA4BH,MAA5B,sBAAqDL,IAArD,EACGS,IADH,CACQ,UAACC,GAAD,EAAS;AAEbP,UAAAA,OAAO,CAACC,GAAR,CAAYM,GAAG,CAACV,IAAJ,CAASW,OAArB;;AACA,UAAA,MAAI,CAACZ,QAAL,CAAc;AAAER,YAAAA,SAAS,EAAE;AAAb,WAAd;;AACA,kBAAQmB,GAAG,CAACV,IAAJ,CAASW,OAAjB;AACE,iBAAK,cAAL;AACE,cAAA,MAAI,CAACZ,QAAL,CAAc;AAAEZ,gBAAAA,KAAK,EAAE,wBAAT;AAAmCG,gBAAAA,UAAU,EAAG;AAAhD,eAAd;;AACA;;AACF,iBAAK,aAAL;AACE,cAAA,MAAI,CAACS,QAAL,CAAc;AAAEZ,gBAAAA,KAAK,EAAE,4CAAT;AAAuDE,gBAAAA,MAAM,EAAG;AAAhE,eAAd;;AACA;;AACF;AACE,cAAA,MAAI,CAACG,WAAL,GAAmB,EAAnB;AACA,cAAA,MAAI,CAACC,IAAL,GAAY,EAAZ,EACE,MAAI,CAACC,WAAL,GAAmB,EADrB;AATJ;AAaD,SAlBH,EAkBKkB,KAlBL,CAkBW,UAACC,GAAD,EAAS;AAChBV,UAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAmBS,GAAnB;AAED,SArBH;AAsBD;AAEF;;;6BAGQ;AAAA;;AACP,aACE,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAEC,MAAM,CAACC,SAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,KAAK7B,KAAL,CAAWK,SAAX,IAAwB,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAEuB,MAAM,CAACE,iBAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACvB,oBAAC,iBAAD;AAAmB,QAAA,IAAI,EAAC,OAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADuB,CAD3B,EAKE,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAEC,QAAQ,CAACC,EAAT,KAAgB,KAAhB,GAAwBJ,MAAM,CAACK,SAA/B,GAA2CL,MAAM,CAACM,KAA/D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEE,oBAAC,UAAD;AAAY,QAAA,UAAU,EAAE,KAAKnC,KAAL,CAAWU,UAAnC;AAA+C,QAAA,MAAM,EAAE,CAAvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CALF,EAUE,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAE;AAAC0B,UAAAA,SAAS,EAAG,CAAb;AAAgBC,UAAAA,IAAI,EAAE,CAAtB;AAAyBC,UAAAA,cAAc,EAAE,QAAzC;AAAmDC,UAAAA,UAAU,EAAE;AAA/D,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAE;AAACC,UAAAA,SAAS,EAAG,QAAb;AAAuBC,UAAAA,UAAU,EAAG,MAApC;AAA2CC,UAAAA,QAAQ,EAAE;AAArD,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCADF,EAEE,oBAAC,KAAD;AAAO,QAAA,MAAM,EAAEC,OAAO,uBAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CAVF,EAeE,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAE;AAAEN,UAAAA,IAAI,EAAE,CAAR;AAAWC,UAAAA,cAAc,EAAE,QAA3B;AAAqCM,UAAAA,UAAU,EAAE,EAAjD;AAAqDC,UAAAA,WAAW,EAAE,EAAlE;AAAsET,UAAAA,SAAS,EAAE,CAAC;AAAlF,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,SAAD;AACE,QAAA,KAAK,EAAE;AAAEU,UAAAA,YAAY,EAAE,EAAhB;AAAoBC,UAAAA,eAAe,EAAG;AAAtC,SADT;AAEE,QAAA,YAAY,EAAE,sBAACnC,IAAD;AAAA,iBAAU,MAAI,CAACL,WAAL,GAAmBK,IAA7B;AAAA,SAFhB;AAGE,QAAA,eAAe,EAAE,IAHnB;AAIE,QAAA,KAAK,EAAC,qBAJR;AAKE,QAAA,cAAc,EAAC,MALjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAUE,oBAAC,SAAD;AACE,QAAA,KAAK,EAAE;AAAEkC,UAAAA,YAAY,EAAE,EAAhB;AAAoBC,UAAAA,eAAe,EAAG;AAAtC,SADT;AAEE,QAAA,YAAY,EAAE,sBAACnC,IAAD;AAAA,iBAAU,MAAI,CAACJ,IAAL,GAAYI,IAAtB;AAAA,SAFhB;AAGE,QAAA,eAAe,EAAE,IAHnB;AAIE,QAAA,KAAK,EAAC,sBAJR;AAKE,QAAA,cAAc,EAAC,MALjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAVF,EAmBE,oBAAC,SAAD;AACE,QAAA,KAAK,EAAE;AAAEkC,UAAAA,YAAY,EAAE,EAAhB;AAAqBC,UAAAA,eAAe,EAAG;AAAvC,SADT;AAEE,QAAA,YAAY,EAAE,sBAACnC,IAAD;AAAA,iBAAU,MAAI,CAACH,WAAL,GAAmBG,IAA7B;AAAA,SAFhB;AAGE,QAAA,eAAe,EAAE,IAHnB;AAIE,QAAA,KAAK,EAAC,gCAJR;AAKE,QAAA,cAAc,EAAC,MALjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAnBF,CAfF,EAqDE,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAE;AAACoC,UAAAA,cAAc,EAAG3D,EAAE,CAAC,IAAD,CAApB;AAA2B4D,UAAAA,gBAAgB,EAAG9D,EAAE,CAAC,IAAD;AAAhD,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,gBAAD;AAAkB,QAAA,KAAK,EAAE;AAAC+D,UAAAA,OAAO,EAAG,EAAX;AAAeH,UAAAA,eAAe,EAAG;AAAjC,SAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAE;AAACP,UAAAA,SAAS,EAAG,QAAb;AAAsBW,UAAAA,KAAK,EAAE;AAA7B,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,CADF,CArDF,CADF;AAgED;;;;EApIkBtE,KAAK,CAACuE,S;;AAuI3B,IAAMvB,MAAM,GAAGwB,UAAU,CAACC,MAAX,CAAkB;AAC/BxB,EAAAA,SAAS,EAAE;AACTO,IAAAA,IAAI,EAAE,CADG;AAETC,IAAAA,cAAc,EAAE,QAFP;AAGTS,IAAAA,eAAe,EAAE;AAHR,GADoB;AAM/BZ,EAAAA,KAAK,EAAE;AACLE,IAAAA,IAAI,EAAE,CADD;AAELkB,IAAAA,SAAS,EAAElE,EAAE,CAAC,KAAD;AAFR,GANwB;AAU/BmE,EAAAA,MAAM,EAAE;AAENhB,IAAAA,SAAS,EAAE;AAFL,GAVuB;AAc/BiB,EAAAA,MAAM,EAAE;AACNjB,IAAAA,SAAS,EAAE,QADL;AAENW,IAAAA,KAAK,EAAE,OAFD;AAGNT,IAAAA,QAAQ,EAAE,EAHJ;AAINN,IAAAA,SAAS,EAAE/C,EAAE,CAAC,KAAD;AAJP,GAduB;AAoB/BqE,EAAAA,GAAG,EAAE;AACHP,IAAAA,KAAK,EAAE;AADJ,GApB0B;AAuB/BQ,EAAAA,IAAI,EAAE;AACJtB,IAAAA,IAAI,EAAE,CADF;AAEJU,IAAAA,eAAe,EAAE,MAFb;AAGJR,IAAAA,UAAU,EAAE,QAHR;AAIJD,IAAAA,cAAc,EAAE;AAJZ,GAvByB;AA6B/BsB,EAAAA,SAAS,EAAE;AACThB,IAAAA,UAAU,EAAE,CADH;AAETC,IAAAA,WAAW,EAAE,CAFJ;AAGTgB,IAAAA,MAAM,EAAE,EAHC;AAITC,IAAAA,KAAK,EAAE3E,EAAE,CAAC,KAAD,CAJA;AAKT4E,IAAAA,WAAW,EAAE,EALJ;AAMThB,IAAAA,eAAe,EAAE,OANR;AAOTiB,IAAAA,YAAY,EAAE,CAPL;AAQTlB,IAAAA,YAAY,EAAEzD,EAAE,CAAC,IAAD;AARP,GA7BoB;AAuC/B4E,EAAAA,MAAM,EAAE;AAENzB,IAAAA,SAAS,EAAE,QAFL;AAGN0B,IAAAA,kBAAkB,EAAE,WAHd;AAINC,IAAAA,UAAU,EAAE,EAJN;AAKNC,IAAAA,aAAa,EAAE,EALT;AAMNL,IAAAA,WAAW,EAAE,EANP;AAONM,IAAAA,YAAY,EAAE,EAPR;AAQNlB,IAAAA,KAAK,EAAE;AARD,GAvCuB;AAiD/BmB,EAAAA,UAAU,EAAE;AACVnB,IAAAA,KAAK,EAAE;AADG,GAjDmB;AAoD/BoB,EAAAA,MAAM,EAAE;AACNpB,IAAAA,KAAK,EAAE,OADD;AAENL,IAAAA,YAAY,EAAEzD,EAAE,CAAC,IAAD,CAFV;AAGN+C,IAAAA,SAAS,EAAE/C,EAAE,CAAC,IAAD,CAHP;AAINmD,IAAAA,SAAS,EAAE;AAJL,GApDuB;AA0D/BgC,EAAAA,WAAW,EAAE;AAEXV,IAAAA,KAAK,EAAE3E,EAAE,CAAC,KAAD,CAFE;AAIX4D,IAAAA,eAAe,EAAE,SAJN;AAKXoB,IAAAA,UAAU,EAAE9E,EAAE,CAAC,IAAD,CALH;AAMX+E,IAAAA,aAAa,EAAE/E,EAAE,CAAC,IAAD,CANN;AAOX2E,IAAAA,YAAY,EAAE,EAPH;AAQXlB,IAAAA,YAAY,EAAEzD,EAAE,CAAC,IAAD,CARL;AASXoF,IAAAA,WAAW,EAAE,CATF;AAUXT,IAAAA,YAAY,EAAE,CAVH;AAWXU,IAAAA,WAAW,EAAE,SAXF;AAYXC,IAAAA,cAAc,EAAE,CAZL;AAaXC,IAAAA,eAAe,EAAE,CAbN;AAcXC,IAAAA,WAAW,EAAE,MAdF;AAeXC,IAAAA,YAAY,EAAE;AAAEhB,MAAAA,KAAK,EAAE,CAAT;AAAYD,MAAAA,MAAM,EAAE;AAApB,KAfH;AAgBXkB,IAAAA,aAAa,EAAE,GAhBJ;AAiBXC,IAAAA,YAAY,EAAE,CAjBH;AAkBXC,IAAAA,SAAS,EAAE;AAlBA,GA1DkB;AA8E/BC,EAAAA,UAAU,EAAE;AACV/B,IAAAA,KAAK,EAAE,OADG;AAEVX,IAAAA,SAAS,EAAE,QAFD;AAGVE,IAAAA,QAAQ,EAAE;AAHA,GA9EmB;AAmF/BX,EAAAA,iBAAiB,EAAE;AACjBoD,IAAAA,QAAQ,EAAE,UADO;AAEjBC,IAAAA,MAAM,EAAE,EAFS;AAGjBC,IAAAA,IAAI,EAAE,CAHW;AAIjBC,IAAAA,KAAK,EAAE,CAJU;AAKjBC,IAAAA,GAAG,EAAE,GALY;AAMjBC,IAAAA,MAAM,EAAE,CANS;AAOjBjD,IAAAA,UAAU,EAAE,QAPK;AAQjBD,IAAAA,cAAc,EAAE;AARC;AAnFY,CAAlB,CAAf;;AA+FA,IAAMmD,eAAe,GAAG,SAAlBA,eAAkB,CAACC,KAAD,EAAW;AACjC,SAAO;AACLrE,IAAAA,IAAI,EAAEqE,KAAK,CAACrE,IADP;AAELsE,IAAAA,OAAO,EAAED,KAAK,CAACC;AAFV,GAAP;AAMD,CAPD;;AASA,IAAMC,kBAAkB,GAAG,EAA3B;AAKA,eAAenG,OAAO,CAACgG,eAAD,EAAkBG,kBAAlB,CAAP,CAA6C7F,MAA7C,CAAf","sourcesContent":["import React from 'react';\r\nimport { StyleSheet, Text, View, AsyncStorage, Keyboard, TouchableOpacity, ActivityIndicator, Image } from 'react-native';\r\nimport { Button, withTheme } from 'react-native-elements';\r\nimport Bdd from '../API/Bdd'\r\nimport {\r\n  widthPercentageToDP as wp,\r\n  heightPercentageToDP as hp,\r\n} from 'react-native-responsive-screen';\r\nimport axios from 'axios';\r\nimport { registerForPushNotificationsAsync } from '../services/notifications';\r\nimport Header from './Menu/Header'\r\nimport { connect } from 'react-redux';\r\nimport { TextInput } from 'react-native-paper';\r\nimport { faSearch } from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-native-fontawesome';\r\nimport TopMenu from \"./Menu/TopMenu\";\r\nimport HeaderMenu from \"./Menu/HeaderMenu\";\r\n\r\nclass Forgot extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      error: null,\r\n      errDroit : null,\r\n      errNew : null,\r\n      errConfirm : null,\r\n      isLoading: false\r\n    }\r\n\r\n    this.currentPass = \"\"\r\n    this.pass = \"\"\r\n    this.confirmPass = \"\"\r\n  }\r\n\r\n  gotToLogin() {\r\n    this.props.navigation.push(\"Login\")\r\n  }\r\n\r\n  onChangeInput(text, type) {\r\n    this[type] = text;\r\n  }\r\n\r\n\r\n  sendForgot() {\r\n\r\n    if (this.pass !== this.confirmPass) {\r\n      this.setState({ error: \"Confirmation mot de passe non identique\", errConfirm : \"Mot de passe non identique\",errNew :\"Mot de passe non identique\" })\r\n      this.pass = \"\",\r\n        this.confirmPass = \"\"\r\n    } else {\r\n      let data = {\r\n        actualPass: this.currentPass,\r\n        passwordUser: this.pass\r\n      }\r\n      console.log(data.actualPass)\r\n      let idUser = this.props.user.user.idUser\r\n      this.setState({ isLoading: true });\r\n      axios.put(`${Bdd.api_url}/${idUser}/reset-password`, data)\r\n        .then((res) => {\r\n          //  console.log(res);\r\n          console.log(res.data.message)\r\n          this.setState({ isLoading: false });\r\n          switch (res.data.message) {\r\n            case \"pas le droit\":\r\n              this.setState({ error: \"mot de passe incorrect\", errConfirm : \"mot de passe incorrect\" })\r\n              break\r\n            case \"use another\":\r\n              this.setState({ error: \"trouver un autre mot de passe que l'actuel\", errNew : \"Trouver un autre que l'actuel\" })\r\n              break\r\n            default:\r\n              this.currentPass = \"\"\r\n              this.pass = \"\",\r\n                this.confirmPass = \"\"\r\n\r\n          }\r\n        }).catch((err) => {\r\n          console.log('err', err);\r\n\r\n        })\r\n    }\r\n\r\n  }\r\n\r\n\r\n  render() {\r\n    return (\r\n      <View style={styles.container}>\r\n        {this.state.isLoading && <View style={styles.loading_container}>\r\n          <ActivityIndicator size='large' />\r\n        </View>}\r\n\r\n        <View style={Platform.OS === 'ios' ? styles.under_ios : styles.under}>\r\n          {/* <TopMenu navigation={this.props.navigation} /> */}\r\n          <HeaderMenu navigation={this.props.navigation} forgot={1} />\r\n        </View>\r\n\r\n        <View style={{marginTop : 0, flex: 1, justifyContent: 'center', alignItems: 'center'}} >\r\n          <Text style={{textAlign : \"center\", fontWeight : \"bold\",fontSize: 23}}>Changer de mot passe </Text>\r\n          <Image source={require(\"../images/reset.png\")}  />\r\n        </View>\r\n\r\n        <View style={{ flex: 1, justifyContent: \"center\", marginLeft: 20, marginRight: 20, marginTop: -150}} >\r\n          <TextInput\r\n            style={{ marginBottom: 20, backgroundColor : \"white\" }}\r\n            onChangeText={(text) => this.currentPass = text}\r\n            secureTextEntry={true}\r\n            label=\"Mot de passe actuel\"\r\n            autoCapitalize='none'\r\n          \r\n\r\n          />\r\n          <TextInput\r\n            style={{ marginBottom: 20, backgroundColor : \"white\" }}\r\n            onChangeText={(text) => this.pass = text}\r\n            secureTextEntry={true}\r\n            label=\"Nouveau mot de passe\"\r\n            autoCapitalize='none'\r\n\r\n\r\n          />\r\n          <TextInput\r\n            style={{ marginBottom: 20,  backgroundColor : \"white\" }}\r\n            onChangeText={(text) => this.confirmPass = text}\r\n            secureTextEntry={true}\r\n            label=\"Confirmer nouveau mot de passe\"\r\n            autoCapitalize='none'\r\n\r\n          />\r\n\r\n          {/* <TouchableOpacity\r\n            style={styles.buttonStyle}\r\n            onPress={(e) => { this.sendForgot() }}\r\n          >\r\n            <Text style={styles.buttonText}>RÃ©initialiser</Text>\r\n          </TouchableOpacity> */}\r\n\r\n        </View>\r\n\r\n\r\n        <View style={{marginVertical : hp(\"2%\"),marginHorizontal : wp(\"2%\")}}>\r\n          <TouchableOpacity style={{padding : 20, backgroundColor : \"#00C1B4\"}}>\r\n            <Text style={{textAlign : \"center\",color :\"white\"}}>Valider</Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n\r\n\r\n\r\n      </View>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    justifyContent: \"center\",\r\n    backgroundColor: 'white'\r\n  },\r\n  under: {\r\n    flex: 1,\r\n    maxHeight: hp('10%'),\r\n  },\r\n  header: {\r\n\r\n    textAlign: 'center'\r\n  },\r\n  center: {\r\n    textAlign: 'center',\r\n    color: \"white\",\r\n    fontSize: 21,\r\n    marginTop: hp('10%')\r\n  },\r\n  red: {\r\n    color: 'red'\r\n  },\r\n  body: {\r\n    flex: 1,\r\n    backgroundColor: '#fff',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n  textinput: {\r\n    marginLeft: 5,\r\n    marginRight: 5,\r\n    height: 50,\r\n    width: wp(\"70%\"),\r\n    paddingLeft: 15,\r\n    backgroundColor: 'white',\r\n    borderRadius: 1,\r\n    marginBottom: hp('2%')\r\n  },\r\n  footer: {\r\n\r\n    textAlign: 'center',\r\n    textDecorationLine: 'underline',\r\n    paddingTop: 15,\r\n    paddingBottom: 15,\r\n    paddingLeft: 15,\r\n    paddingRight: 15,\r\n    color: \"white\"\r\n  },\r\n  normalText: {\r\n    color: \"white\"\r\n  },\r\n  title2: {\r\n    color: \"white\",\r\n    marginBottom: hp('2%'),\r\n    marginTop: hp('5%'),\r\n    textAlign: \"center\"\r\n  },\r\n  buttonStyle: {\r\n\r\n    width: wp(\"70%\"),\r\n\r\n    backgroundColor: \"#00C1B4\",\r\n    paddingTop: hp('2%'),\r\n    paddingBottom: hp('2%'),\r\n    borderRadius: 10,\r\n    marginBottom: hp(\"2%\"),\r\n    borderWidth: 1,\r\n    borderRadius: 2,\r\n    borderColor: '#029B95',\r\n    borderTopWidth: 0,\r\n    borderLeftWidth: 0,\r\n    shadowColor: '#000',\r\n    shadowOffset: { width: 0, height: 2 },\r\n    shadowOpacity: 0.8,\r\n    shadowRadius: 2,\r\n    elevation: 1,\r\n  },\r\n  buttonText: {\r\n    color: 'white',\r\n    textAlign: \"center\",\r\n    fontSize: 16\r\n  },\r\n  loading_container: {\r\n    position: 'absolute',\r\n    zIndex: 10,\r\n    left: 0,\r\n    right: 0,\r\n    top: 100,\r\n    bottom: 0,\r\n    alignItems: 'center',\r\n    justifyContent: 'center'\r\n  }\r\n});\r\n\r\nconst mapStateToProps = (store) => {\r\n  return {\r\n    user: store.user,\r\n    contact: store.contact,\r\n    /* favorite: store.favorite,\r\n    second: store.second */\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Forgot);"]},"metadata":{},"sourceType":"module"}