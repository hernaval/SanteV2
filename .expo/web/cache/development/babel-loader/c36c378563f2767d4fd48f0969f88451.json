{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\Users\\\\Stenny Gabriel\\\\best4sante\\\\Best4Sante\\\\assets\\\\component\\\\forgot.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport AsyncStorage from \"react-native-web/dist/exports/AsyncStorage\";\nimport Keyboard from \"react-native-web/dist/exports/Keyboard\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { Button, withTheme } from 'react-native-elements';\nimport Bdd from \"../API/Bdd\";\nimport { widthPercentageToDP as wp, heightPercentageToDP as hp } from 'react-native-responsive-screen';\nimport axios from 'axios';\nimport { registerForPushNotificationsAsync } from \"../services/notifications\";\nimport Header from \"./Menu/Header\";\n\nvar Forgot = function (_React$Component) {\n  _inherits(Forgot, _React$Component);\n\n  var _super = _createSuper(Forgot);\n\n  function Forgot(props) {\n    var _this;\n\n    _classCallCheck(this, Forgot);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      error: null,\n      isLoading: false,\n      invalidEmail: null\n    };\n    _this.email = \"\";\n    return _this;\n  }\n\n  _createClass(Forgot, [{\n    key: \"gotToLogin\",\n    value: function gotToLogin() {\n      this.props.navigation.push(\"Login\");\n    }\n  }, {\n    key: \"onChangeInput\",\n    value: function onChangeInput(text, type) {\n      this[type] = text;\n    }\n  }, {\n    key: \"sendForgot\",\n    value: function sendForgot() {\n      var _this2 = this;\n\n      var data = {\n        email: this.email\n      };\n      email = /^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+$/;\n      this.setState({\n        invalidEmail: null\n      });\n\n      if (!email.test(this.email)) {\n        this.setState({\n          invalidEmail: 'Adresse email invalide'\n        });\n        return;\n      }\n\n      this.setState({\n        isLoading: true\n      });\n      axios.post(Bdd.api_url + '/api/forgot/password', data).then(function (res) {\n        _this2.setState({\n          isLoading: false\n        });\n\n        if (res.data.status === 401) {\n          _this2.setState({\n            error: res.data.error\n          }, function () {});\n        } else {\n          _this2.setState({\n            error: \"un mail a été envoyé\"\n          }, function () {\n            console.log(_this2.state);\n          });\n\n          Keyboard.dismiss();\n        }\n      }).catch(function (err) {\n        console.log('err', err);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(View, {\n        style: styles.container,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 7\n        }\n      }, this.state.isLoading && React.createElement(View, {\n        style: styles.loading_container,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 34\n        }\n      }, React.createElement(ActivityIndicator, {\n        size: \"large\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }\n      })), React.createElement(View, {\n        style: styles.header,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 9\n        }\n      }, React.createElement(View, {\n        style: styles.center,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }\n      }, React.createElement(Image, {\n        style: {\n          marginLeft: wp('10%'),\n          width: wp('35%'),\n          height: wp('35%'),\n          backgroundColor: 'white',\n          borderRadius: 400 / 2\n        },\n        source: require(\"../images/icon_point.jpeg\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 17\n        }\n      })), React.createElement(Text, {\n        style: styles.center,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }\n      }, \"Mot de passe oubli\\xE9 ?\"), this.state.error !== null && React.createElement(Text, {\n        style: (styles.center, styles.red),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 41\n        }\n      }, this.state.error)), React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 9\n        }\n      }, React.createElement(Text, {\n        style: styles.title2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }\n      }, \"Entrez votre adresse mail\"), React.createElement(TextInput, {\n        style: styles.textinput,\n        onChangeText: function onChangeText(text) {\n          return _this3.onChangeInput(text, 'email');\n        },\n        type: \"email\",\n        placeholder: \"Adresse mail du compte\",\n        autoCapitalize: \"none\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }\n      }), React.createElement(Text, {\n        style: styles.invalid,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }\n      }, this.state.invalidEmail), React.createElement(TouchableOpacity, {\n        style: styles.buttonStyle,\n        onPress: function onPress(e) {\n          _this3.sendForgot();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }\n      }, React.createElement(Text, {\n        style: styles.buttonText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 13\n        }\n      }, \"Recevoir un lien de r\\xE9initialisation\"))), React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 9\n        }\n      }, React.createElement(Text, {\n        style: styles.footer,\n        onPress: function onPress(e) {\n          _this3.gotToLogin();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }\n      }, \"D\\xE9j\\xE0 un compte ?\")));\n    }\n  }]);\n\n  return Forgot;\n}(React.Component);\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    backgroundColor: '#01DCD5'\n  },\n  under: {\n    flex: 1,\n    maxHeight: hp('10%')\n  },\n  header: {\n    textAlign: 'center'\n  },\n  center: {\n    textAlign: 'center',\n    color: \"white\",\n    fontSize: 21,\n    marginTop: hp('10%')\n  },\n  red: {\n    color: 'red'\n  },\n  body: {\n    flex: 1,\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  textinput: {\n    marginLeft: 5,\n    marginRight: 5,\n    height: 50,\n    width: wp(\"70%\"),\n    paddingLeft: 15,\n    backgroundColor: 'white',\n    borderRadius: 1,\n    marginBottom: hp('2%')\n  },\n  footer: {\n    textAlign: 'center',\n    textDecorationLine: 'underline',\n    paddingTop: 15,\n    paddingBottom: 15,\n    paddingLeft: 15,\n    paddingRight: 15,\n    color: \"white\"\n  },\n  normalText: {\n    color: \"white\"\n  },\n  title2: {\n    color: \"white\",\n    marginBottom: hp('2%'),\n    marginTop: hp('5%'),\n    textAlign: \"center\"\n  },\n  buttonStyle: {\n    marginTop: hp(\"2%\"),\n    width: wp(\"70%\"),\n    borderColor: 'red',\n    backgroundColor: \"#00C1B4\",\n    paddingTop: hp('2%'),\n    paddingBottom: hp('2%'),\n    borderRadius: 10,\n    marginBottom: hp(\"2%\"),\n    borderWidth: 1,\n    borderRadius: 2,\n    borderColor: '#029B95',\n    borderTopWidth: 0,\n    borderLeftWidth: 0,\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.8,\n    shadowRadius: 2,\n    elevation: 1\n  },\n  buttonText: {\n    color: 'white',\n    textAlign: \"center\",\n    fontSize: 16\n  },\n  loading_container: {\n    position: 'absolute',\n    zIndex: 10,\n    left: 0,\n    right: 0,\n    top: 100,\n    bottom: 0,\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  invalid: {\n    color: '#eb002a',\n    alignItems: 'center',\n    textAlign: 'center'\n  }\n});\nexport default Forgot;","map":{"version":3,"sources":["C:/Users/Stenny Gabriel/best4sante/Best4Sante/assets/component/forgot.js"],"names":["React","Button","withTheme","Bdd","widthPercentageToDP","wp","heightPercentageToDP","hp","axios","registerForPushNotificationsAsync","Header","Forgot","props","state","error","isLoading","invalidEmail","email","navigation","push","text","type","data","setState","test","post","api_url","then","res","status","console","log","Keyboard","dismiss","catch","err","styles","container","loading_container","header","center","marginLeft","width","height","backgroundColor","borderRadius","require","red","title2","textinput","onChangeInput","invalid","buttonStyle","e","sendForgot","buttonText","footer","gotToLogin","Component","StyleSheet","create","flex","alignItems","under","maxHeight","textAlign","color","fontSize","marginTop","body","justifyContent","marginRight","paddingLeft","marginBottom","textDecorationLine","paddingTop","paddingBottom","paddingRight","normalText","borderColor","borderWidth","borderTopWidth","borderLeftWidth","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation","position","zIndex","left","right","top","bottom"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { StyleSheet, Text, View, TextInput, AsyncStorage, Keyboard, TouchableOpacity, ActivityIndicator, Image } from 'react-native';\r\nimport {Button, withTheme} from 'react-native-elements';\r\nimport Bdd from '../API/Bdd'\r\nimport {\r\n  widthPercentageToDP as wp,\r\n  heightPercentageToDP as hp,\r\n} from 'react-native-responsive-screen';\r\nimport axios from 'axios';\r\nimport {registerForPushNotificationsAsync} from '../services/notifications';\r\nimport Header from './Menu/Header'\r\n\r\n\r\nclass Forgot extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      error: null,\r\n      isLoading: false,\r\n      invalidEmail: null\r\n    }\r\n   \r\n    this.email = \"\";\r\n  }\r\n\r\n  gotToLogin() {\r\n    this.props.navigation.push(\"Login\")\r\n  }\r\n\r\n  onChangeInput(text, type){\r\n    this[type] = text;\r\n  }\r\n\r\n\r\n  sendForgot() {\r\n    let data = {\r\n      email: this.email,\r\n    }\r\n    email = /^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+$/\r\n    this.setState({invalidEmail: null})\r\n\r\n    if (!email.test(this.email)) {\r\n      this.setState({invalidEmail: 'Adresse email invalide'})\r\n      return;\r\n    }\r\n\r\n    this.setState({isLoading: true});\r\n    axios.post(Bdd.api_url+'/api/forgot/password', data )\r\n      .then((res)=>{\r\n      //  console.log(res);\r\n        this.setState({isLoading: false});\r\n        if (res.data.status === 401) {\r\n          this.setState({error: res.data.error}, ()=>{\r\n          //  console.log(this.state)\r\n          })\r\n        } else {\r\n            this.setState({error: \"un mail a été envoyé\"}, ()=>{console.log(this.state)})\r\n          Keyboard.dismiss()\r\n        }\r\n      }).catch((err)=>{\r\n        console.log('err',err);\r\n\r\n      })\r\n  }\r\n\r\n\r\n  render(){\r\n    return (\r\n      <View style={styles.container}>\r\n        {this.state.isLoading && <View style={styles.loading_container}>\r\n            <ActivityIndicator size='large' />\r\n        </View>}\r\n        <View style={styles.header}>\r\n            <View style={styles.center}>\r\n                <Image\r\n                    style={{marginLeft: wp('10%'), width: wp('35%'), height: wp('35%'), backgroundColor: 'white', borderRadius: 400/2}}\r\n                    source={require('../images/icon_point.jpeg')}\r\n                />\r\n            </View>\r\n          <Text style={styles.center}>Mot de passe oublié ?</Text>\r\n          {this.state.error !== null && <Text style={styles.center, styles.red}>{this.state.error}</Text>}\r\n        </View>\r\n        <View >\r\n          <Text style={styles.title2}>Entrez votre adresse mail</Text>\r\n          <TextInput \r\n            style={styles.textinput}\r\n            onChangeText={(text) => this.onChangeInput(text, 'email')}\r\n            type=\"email\"\r\n            placeholder=\"Adresse mail du compte\"\r\n            autoCapitalize = 'none'\r\n            //onSubmitEditing={() => this._searchFilms()}\r\n          />\r\n          <Text style={styles.invalid}>{this.state.invalidEmail}</Text>\r\n          <TouchableOpacity\r\n            style={styles.buttonStyle}\r\n            onPress={(e)=>{this.sendForgot()}}\r\n          >\r\n            <Text style={styles.buttonText}>Recevoir un lien de réinitialisation</Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n        <View>\r\n          <Text\r\n            style={styles.footer}\r\n            onPress={(e)=>{\r\n              this.gotToLogin();\r\n            }}\r\n          >\r\n            Déjà un compte ?\r\n          </Text>\r\n        </View>\r\n      </View>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    alignItems: 'center',\r\n    backgroundColor: '#01DCD5'\r\n  },\r\n  under: {\r\n    flex:1,\r\n    maxHeight: hp('10%'),\r\n  },\r\n  header: {\r\n\r\n    textAlign:'center'\r\n  },\r\n  center: {\r\n    textAlign: 'center',\r\n    color: \"white\",\r\n    fontSize: 21,\r\n    marginTop: hp('10%')\r\n  },\r\n  red:{\r\n    color: 'red'\r\n  },\r\n  body: {\r\n    flex: 1,\r\n    backgroundColor: '#fff',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n  textinput: {\r\n    marginLeft: 5,\r\n    marginRight: 5,\r\n    height: 50,\r\n    width: wp(\"70%\"),\r\n    paddingLeft: 15,\r\n    backgroundColor: 'white',\r\n    borderRadius: 1,\r\n    marginBottom: hp('2%')\r\n  },\r\n  footer: {\r\n\r\n    textAlign:'center',\r\n    textDecorationLine: 'underline',\r\n    paddingTop: 15,\r\n    paddingBottom: 15,\r\n    paddingLeft: 15,\r\n    paddingRight: 15,\r\n    color: \"white\"\r\n  },\r\n  normalText: {\r\n    color: \"white\"\r\n  },\r\n  title2: {\r\n    color: \"white\",\r\n    marginBottom: hp('2%'),\r\n    marginTop: hp('5%'),\r\n    textAlign: \"center\"\r\n  },\r\n  buttonStyle: {\r\n    marginTop: hp(\"2%\"), \r\n    width: wp(\"70%\"), \r\n    borderColor:'red',\r\n    backgroundColor: \"#00C1B4\",\r\n    paddingTop: hp('2%'),\r\n    paddingBottom: hp('2%'),\r\n    borderRadius: 10,\r\n    marginBottom: hp(\"2%\"),\r\n    borderWidth: 1,\r\n    borderRadius: 2,\r\n    borderColor: '#029B95',\r\n    borderTopWidth: 0,\r\n    borderLeftWidth: 0,\r\n    shadowColor: '#000',\r\n    shadowOffset: { width: 0, height: 2 },\r\n    shadowOpacity: 0.8,\r\n    shadowRadius: 2,\r\n    elevation: 1,\r\n  },\r\n  buttonText: {\r\n    color: 'white',\r\n    textAlign: \"center\",\r\n    fontSize: 16\r\n  },\r\n  loading_container: {\r\n    position: 'absolute',\r\n    zIndex:10,\r\n    left: 0,\r\n    right: 0,\r\n    top: 100,\r\n    bottom: 0,\r\n    alignItems: 'center',\r\n    justifyContent: 'center'\r\n  },\r\n  invalid: {\r\n    color: '#eb002a',\r\n    alignItems: 'center',\r\n    textAlign: 'center'\r\n  }\r\n});\r\n\r\nexport default Forgot;"]},"metadata":{},"sourceType":"module"}