{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\Users\\\\Stenny Gabriel\\\\best4sante\\\\Best4Sante\\\\assets\\\\Screens\\\\Documents\\\\FileManager.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport TopMenu from \"../../component/Menu/TopMenu\";\nimport { connect } from 'react-redux';\nimport { widthPercentageToDP as wp, heightPercentageToDP as hp } from 'react-native-responsive-screen';\nimport { SearchBar, Icon } from 'react-native-elements';\nimport { ScrollView } from 'react-native-gesture-handler';\nimport { FontAwesomeIcon } from '@fortawesome/react-native-fontawesome';\nimport { faHome, faBars, faTimes, faCaretDown, faNotesMedical, faHandsHelping, faPumpMedical, faDisease, faFileImage, faShareAlt, faEye, faTrash } from '@fortawesome/free-solid-svg-icons';\nimport { Row, Grid } from 'react-native-easy-grid';\nimport axios from 'axios';\nimport Bdd from \"../../API/Bdd\";\nimport * as Sharing from 'expo-sharing';\nimport * as FileSystem from 'expo-file-system';\nimport BottomMenu from \"../../component/Menu/BottomMenu\";\nimport { Avatar, Divider, ListItem } from 'react-native-elements';\nimport ImageView from \"react-native-image-viewing\";\n\nvar FileManager = function (_Component) {\n  _inherits(FileManager, _Component);\n\n  var _super = _createSuper(FileManager);\n\n  function FileManager(props) {\n    var _this;\n\n    _classCallCheck(this, FileManager);\n\n    _this = _super.call(this, props);\n\n    _this._initDoc = function _callee() {\n      var id;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              id = _this.props.user.user.idUser;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(axios.get(Bdd.api_url + \"/document/list?idUser=\" + id).then(function (response) {\n                if (_this.state.selectedCate === \"all\") {\n                  _this.setState({\n                    documents: response.data.data\n                  });\n                } else if (_this.state.selectedCate === \"aut\") {\n                  var selectedDoc = response.data.data.filter(function (el) {\n                    return el.cateDoc !== \"all\" && el.cateDoc !== \"ordo\" && el.cateDoc !== \"cert\" && el.cateDoc !== \"atte\" && el.cate.Doc !== \"cptr\";\n                  });\n\n                  _this.setState({\n                    documents: selectedDoc\n                  });\n                } else {\n                  var _selectedDoc = response.data.data.filter(function (el) {\n                    return el.cateDoc == _this.state.selectedCate;\n                  });\n\n                  _this.setState({\n                    documents: _selectedDoc\n                  }, function () {});\n                }\n              }));\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.renderCardCate = function (text, isColor, cate, index) {\n      return React.createElement(TouchableOpacity, {\n        key: index,\n        onPress: function onPress() {\n          _this.handleCate(cate, index);\n        },\n        style: [styles.cardContainer, isColor == true ? {\n          backgroundColor: \"#008ac2\"\n        } : {\n          backgroundColor: \"white\"\n        }],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 9\n        }\n      }, React.createElement(FontAwesomeIcon, {\n        size: 30,\n        style: [styles.iconCard, isColor == true ? {\n          color: \"white\"\n        } : {\n          color: \"grey\"\n        }],\n        icon: faNotesMedical,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 13\n        }\n      }), React.createElement(Text, {\n        style: [styles.cardText, isColor == true ? {\n          color: \"white\"\n        } : {\n          color: \"grey\"\n        }],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 13\n        }\n      }, text));\n    };\n\n    _this.handleCate = function _callee2(cate, index) {\n      return _regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(_this.setState({\n                selectedCate: cate,\n                numColored: index\n              }));\n\n            case 2:\n              _context2.next = 4;\n              return _regeneratorRuntime.awrap(_this._initDoc());\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.goToDetail = function (index) {\n      _this.setState({\n        isVisible: true,\n        imgIndex: index\n      });\n    };\n\n    _this.renderCardDoc = function (id, docName, docDate, index) {\n      return React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return _this.goToDetail(index);\n        },\n        key: index,\n        style: {\n          flexDirection: \"column\",\n          marginRight: wp(\"1%\")\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 9\n        }\n      }, React.createElement(View, {\n        style: styles.docType,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 13\n        }\n      }, React.createElement(Icon, {\n        name: \"collections\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 17\n        }\n      })), React.createElement(Text, {\n        style: styles.docName,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 13\n        }\n      }, docName), React.createElement(Text, {\n        style: styles.docName,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 13\n        }\n      }, docDate));\n    };\n\n    _this.blabla = function (id, docName, docDate, index) {\n      return React.createElement(ListItem, {\n        key: index,\n        containerStyle: {\n          margin: 10\n        },\n        title: docName,\n        subtitle: docDate,\n        leftIcon: React.createElement(FontAwesomeIcon, {\n          icon: faFileImage,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 23\n          }\n        }),\n        bottomDivider: true,\n        rightElement: React.createElement(React.Fragment, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 17\n          }\n        }, React.createElement(TouchableOpacity, {\n          style: {\n            padding: 10\n          },\n          onPress: function onPress() {\n            return _this.goToDetail(index);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 21\n          }\n        }, React.createElement(FontAwesomeIcon, {\n          icon: faEye,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 25\n          }\n        })), React.createElement(TouchableOpacity, {\n          style: {\n            padding: 10\n          },\n          onPress: function onPress() {\n            return _this.shareDoc(id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 21\n          }\n        }, React.createElement(FontAwesomeIcon, {\n          icon: faShareAlt,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 25\n          }\n        })), React.createElement(TouchableOpacity, {\n          style: {\n            padding: 10\n          },\n          onPress: function onPress() {\n            return _this.deleteDoc(id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 21\n          }\n        }, React.createElement(FontAwesomeIcon, {\n          icon: faTrash,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 25\n          }\n        }))),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 9\n        }\n      });\n    };\n\n    _this.perform = function (id) {\n      _this.setState({\n        selectedDoc: id,\n        modalVisible: true\n      });\n    };\n\n    _this.shareDoc = function _callee4(id) {\n      var image_source;\n      return _regeneratorRuntime.async(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _this.setState({\n                isLoading: true\n              });\n\n              _context4.next = 3;\n              return _regeneratorRuntime.awrap(_this.getDoc(id));\n\n            case 3:\n              image_source = Bdd.pict_url + _this.state.uri;\n              FileSystem.downloadAsync(image_source, FileSystem.documentDirectory + \".jpg\").then(function _callee3(_ref) {\n                var uri;\n                return _regeneratorRuntime.async(function _callee3$(_context3) {\n                  while (1) {\n                    switch (_context3.prev = _context3.next) {\n                      case 0:\n                        uri = _ref.uri;\n                        console.log('Finished downloading to ', uri);\n                        _context3.next = 4;\n                        return _regeneratorRuntime.awrap(Sharing.shareAsync(uri));\n\n                      case 4:\n                        _this.setState({\n                          isLoading: false\n                        });\n\n                      case 5:\n                      case \"end\":\n                        return _context3.stop();\n                    }\n                  }\n                }, null, null, null, Promise);\n              });\n\n            case 5:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.getDoc = function _callee5(id) {\n      var data;\n      return _regeneratorRuntime.async(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              data = {\n                id: id\n              };\n              axios.post(Bdd.api_url + \"/api/document/detail\", data).then(function (response) {\n                _this.setState({\n                  name_doc: response.data.document.nam,\n                  uri: response.data.document.url\n                });\n              });\n\n            case 2:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.state = {\n      documents: [],\n      selectedCate: \"all\",\n      numColored: 0,\n      listOption: false,\n      selectedDoc: null,\n      modalVisible: false,\n      imgIndex: 0,\n      isLoading: false\n    };\n    _this.images = [];\n    return _this;\n  }\n\n  _createClass(FileManager, [{\n    key: \"selectedDocItem\",\n    value: function selectedDocItem() {\n      var _this2 = this;\n\n      var oneDoc = [];\n\n      if (this.state.selectedDoc !== null) {\n        oneDoc = this.state.documents.filter(function (el) {\n          return el.id === _this2.state.selectedDoc;\n        });\n      }\n\n      return oneDoc[0];\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      return _regeneratorRuntime.async(function componentDidMount$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              this.setState({\n                isLoading: true\n              });\n              _context6.next = 3;\n              return _regeneratorRuntime.awrap(this._initDoc());\n\n            case 3:\n              this.setState({\n                isLoading: false\n              });\n\n            case 4:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"deleteDoc\",\n    value: function deleteDoc(id) {\n      var _this3 = this;\n\n      axios.delete(Bdd.api_url + \"/document/\" + id).then(function _callee6(response) {\n        return _regeneratorRuntime.async(function _callee6$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _this3.setState({\n                  isLoading: true\n                });\n\n                _context7.next = 3;\n                return _regeneratorRuntime.awrap(_this3._initDoc());\n\n              case 3:\n                _this3.setState({\n                  isLoading: false\n                });\n\n              case 4:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, null, null, null, Promise);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var datas = [{\n        type: \"Tous\",\n        label: \"all\"\n      }, {\n        type: \"Mes ordonnances\",\n        label: \"ordo\"\n      }, {\n        type: \"Mes certificats\",\n        label: \"cart\"\n      }, {\n        type: \"Mes attestations\",\n        label: \"atte\"\n      }, {\n        type: \"Mes comptes-rendus\",\n        label: \"cptr\"\n      }, {\n        type: \"Autres\",\n        label: \"aut\"\n      }];\n      return React.createElement(View, {\n        style: {\n          flex: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 13\n        }\n      }, React.createElement(ScrollView, {\n        style: styles.container,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 17\n        }\n      }, React.createElement(View, {\n        style: Platform.OS === 'ios' ? styles.under_ios : styles.under,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 21\n        }\n      }, React.createElement(TopMenu, {\n        navigation: this.props.navigation,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 25\n        }\n      })), this.state.isLoading && React.createElement(View, {\n        style: styles.loading_container,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 46\n        }\n      }, React.createElement(ActivityIndicator, {\n        size: \"large\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 25\n        }\n      })), React.createElement(View, {\n        style: styles.categories,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 21\n        }\n      }, React.createElement(ScrollView, {\n        indicatorStyle: \"white\",\n        nestedScrollEnabled: true,\n        horizontal: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 25\n        }\n      }, datas.map(function (data, i) {\n        return _this4.state.numColored === i ? _this4.renderCardCate(data.type, true, data.label, i) : _this4.renderCardCate(data.type, false, data.label, i);\n      }))), React.createElement(View, {\n        style: styles.docContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 21\n        }\n      }, React.createElement(View, {\n        style: styles.actionButton,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 25\n        }\n      }, React.createElement(TouchableOpacity, {\n        style: {\n          marign: 5,\n          padding: 10,\n          backgroundColor: \"#008ac2\"\n        },\n        onPress: function onPress() {\n          return _this4.props.navigation.navigate(\"Test\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 29\n        }\n      }, React.createElement(Text, {\n        style: {\n          color: \"white\",\n          textAlign: \"center\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 33\n        }\n      }, \"Ajouter un document\"))), React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 25\n        }\n      }, React.createElement(ScrollView, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 29\n        }\n      }, this.state.documents.length !== 0 && this.state.documents.map(function (document, i) {\n        var dataImg = {\n          uri: document.typeDoc\n        };\n\n        _this4.images.push(dataImg);\n\n        var name = document.nomDoc;\n        var date = document.createdAt;\n        return _this4.blabla(document.idDoc, name, date, i);\n      }))))), React.createElement(ImageView, {\n        images: this.images,\n        imageIndex: this.state.imgIndex,\n        visible: this.state.isVisible,\n        onRequestClose: function onRequestClose() {\n          return _this4.setState({\n            isVisible: false\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 17\n        }\n      }), React.createElement(BottomMenu, {\n        navigation: this.props.navigation,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 17\n        }\n      }));\n    }\n  }]);\n\n  return FileManager;\n}(Component);\n\nvar styles = StyleSheet.create({\n  container: {},\n  centeredView: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    marginTop: 22\n  },\n  modalView: {\n    margin: 20,\n    backgroundColor: \"white\",\n    borderRadius: 20,\n    padding: 35,\n    alignItems: \"center\",\n    shadowColor: \"#000\",\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.25,\n    shadowRadius: 3.84,\n    elevation: 5\n  },\n  docType: {\n    backgroundColor: \"#4f9e9e\",\n    borderColor: \"grey\",\n    opacity: 0.5,\n    padding: wp(\"4%\"),\n    borderRadius: 12\n  },\n  docName: {\n    color: \"#d3d3d3\",\n    textAlign: \"center\"\n  },\n  docContainer: {\n    flexDirection: \"column\",\n    backgroundColor: \"white\",\n    borderRadius: 10,\n    height: hp(\"50%\"),\n    paddingTop: hp(\"1%\")\n  },\n  btnAction: {\n    padding: wp(\"1%\"),\n    marginRight: wp(\"1%\"),\n    backgroundColor: \"#cad0db\",\n    borderRadius: 5\n  },\n  docItem: {\n    flexDirection: \"row\",\n    flexWrap: \"wrap\",\n    marginTop: hp(\"1%\"),\n    justifyContent: \"space-around\"\n  },\n  actionButton: {\n    flexDirection: \"row\",\n    justifyContent: \"flex-end\"\n  },\n  searchContainer: {\n    width: wp(\"100%\")\n  },\n  inputs: {\n    height: 45,\n    marginLeft: 16,\n    borderBottomColor: '#FFFFFF',\n    flex: 1\n  },\n  cardContainer: {\n    height: hp(\"25%\"),\n    width: wp(\"70%\"),\n    borderRadius: 5,\n    paddingLeft: 10,\n    paddingRight: 5,\n    paddingTop: 20,\n    paddingBottom: 20,\n    borderColor: \"grey\",\n    margin: 10,\n    shadowColor: \"#000\",\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.25,\n    shadowRadius: 3.84,\n    elevation: 5\n  },\n  cardText: {\n    marginTop: 20,\n    marginLeft: 10,\n    color: \"grey\",\n    fontSize: 14,\n    textShadowColor: 'rgba(255, 255, 255, 0.75)',\n    textShadowOffset: {\n      width: -1,\n      height: 1\n    },\n    textShadowRadius: 10,\n    fontSize: 17\n  },\n  iconCard: {\n    color: \"grey\"\n  },\n  under: {\n    height: hp('10%'),\n    width: wp(\"100%\")\n  },\n  under_ios: {\n    width: wp(\"100%\"),\n    height: hp('10%'),\n    zIndex: 2\n  },\n  loading_container: {\n    position: 'absolute',\n    zIndex: 10,\n    left: 0,\n    right: 0,\n    top: 100,\n    bottom: 0,\n    alignItems: 'center',\n    justifyContent: 'center'\n  }\n});\n\nvar mapStateToProps = function mapStateToProps(store) {\n  return {\n    user: store.user\n  };\n};\n\nvar mapDispatchToProps = {};\nexport default connect(mapStateToProps, mapDispatchToProps)(FileManager);","map":{"version":3,"sources":["C:/Users/Stenny Gabriel/best4sante/Best4Sante/assets/Screens/Documents/FileManager.js"],"names":["React","Component","TopMenu","connect","widthPercentageToDP","wp","heightPercentageToDP","hp","SearchBar","Icon","ScrollView","FontAwesomeIcon","faHome","faBars","faTimes","faCaretDown","faNotesMedical","faHandsHelping","faPumpMedical","faDisease","faFileImage","faShareAlt","faEye","faTrash","Row","Grid","axios","Bdd","Sharing","FileSystem","BottomMenu","Avatar","Divider","ListItem","ImageView","FileManager","props","_initDoc","id","user","idUser","get","api_url","then","response","state","selectedCate","setState","documents","data","selectedDoc","filter","el","cateDoc","cate","Doc","renderCardCate","text","isColor","index","handleCate","styles","cardContainer","backgroundColor","iconCard","color","cardText","numColored","goToDetail","isVisible","imgIndex","renderCardDoc","docName","docDate","flexDirection","marginRight","docType","blabla","margin","padding","shareDoc","deleteDoc","perform","modalVisible","isLoading","getDoc","image_source","pict_url","uri","downloadAsync","documentDirectory","console","log","shareAsync","post","name_doc","document","nam","url","listOption","images","oneDoc","delete","datas","type","label","flex","container","Platform","OS","under_ios","under","navigation","loading_container","categories","map","i","docContainer","actionButton","marign","navigate","textAlign","length","dataImg","typeDoc","push","name","nomDoc","date","createdAt","idDoc","StyleSheet","create","centeredView","justifyContent","alignItems","marginTop","modalView","borderRadius","shadowColor","shadowOffset","width","height","shadowOpacity","shadowRadius","elevation","borderColor","opacity","paddingTop","btnAction","docItem","flexWrap","searchContainer","inputs","marginLeft","borderBottomColor","paddingLeft","paddingRight","paddingBottom","fontSize","textShadowColor","textShadowOffset","textShadowRadius","zIndex","position","left","right","top","bottom","mapStateToProps","store","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { Text, View, StyleSheet, TextInput, TouchableOpacity, Modal,ActivityIndicator } from 'react-native'\r\nimport TopMenu from \"../../component/Menu/TopMenu\"\r\nimport { connect } from 'react-redux'\r\nimport {\r\n    widthPercentageToDP as wp,\r\n    heightPercentageToDP as hp,\r\n} from 'react-native-responsive-screen';\r\nimport { SearchBar, Icon } from 'react-native-elements';\r\nimport { ScrollView } from 'react-native-gesture-handler';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-native-fontawesome';\r\nimport { faHome, faBars, faTimes, faCaretDown, faNotesMedical, faHandsHelping, faPumpMedical, faDisease, faFileImage, faShareAlt, faEye, faTrash } from '@fortawesome/free-solid-svg-icons';\r\nimport { Row, Grid } from 'react-native-easy-grid';\r\nimport axios from 'axios';\r\nimport Bdd from \"../../API/Bdd\"\r\nimport * as Sharing from 'expo-sharing';\r\nimport * as  FileSystem from 'expo-file-system';\r\nimport BottomMenu from \"../../component/Menu/BottomMenu\"\r\nimport { Avatar, Divider, ListItem } from 'react-native-elements';\r\nimport ImageView from \"react-native-image-viewing\";\r\nclass FileManager extends Component {\r\n\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            documents: [],\r\n            selectedCate: \"all\",\r\n            numColored: 0,\r\n            listOption: false,\r\n            selectedDoc: null,\r\n            modalVisible: false,\r\n\r\n            imgIndex: 0,\r\n            isLoading : false\r\n\r\n        }\r\n        this.images = []\r\n\r\n    }\r\n\r\n    selectedDocItem() {\r\n        let oneDoc = []\r\n        if (this.state.selectedDoc !== null) {\r\n            oneDoc = this.state.documents.filter(el => {\r\n                return el.id === this.state.selectedDoc\r\n            })\r\n        }\r\n        return oneDoc[0]\r\n    }\r\n\r\n\r\n    async componentDidMount() {\r\n        this.setState({isLoading : true})\r\n        await this._initDoc()\r\n        this.setState({isLoading : false})\r\n    }\r\n    _initDoc = async () => {\r\n        let id = this.props.user.user.idUser;\r\n\r\n        await axios.get(`${Bdd.api_url}/document/list?idUser=${id}`)\r\n            .then((response) => {\r\n\r\n                if (this.state.selectedCate === \"all\") {\r\n                    this.setState({ documents: response.data.data })\r\n                } else\r\n                    if (this.state.selectedCate === \"aut\") {\r\n                        let selectedDoc = response.data.data.filter(el => {\r\n                            return (el.cateDoc !== \"all\" && el.cateDoc !== \"ordo\" &&\r\n                                el.cateDoc !== \"cert\" && el.cateDoc !== \"atte\" &&\r\n                                el.cate.Doc !== \"cptr\")\r\n                        })\r\n                        this.setState({ documents: selectedDoc })\r\n                    }\r\n                    else {\r\n                        let selectedDoc = response.data.data.filter(el => {\r\n                            return el.cateDoc == this.state.selectedCate\r\n                        })\r\n                        this.setState({ documents: selectedDoc }, () => {\r\n                            //.log('state',this.state)\r\n                        })\r\n                    }\r\n\r\n            })\r\n    }\r\n\r\n    renderCardCate = (text, isColor, cate, index) => (\r\n        <TouchableOpacity key={index} onPress={() => { this.handleCate(cate, index) }} style={[styles.cardContainer, isColor == true ? { backgroundColor: \"#008ac2\" } : { backgroundColor: \"white\" }]}>\r\n            <FontAwesomeIcon size={30} style={[styles.iconCard, isColor == true ? { color: \"white\" } : { color: \"grey\" }]} icon={faNotesMedical} />\r\n            <Text style={[styles.cardText, isColor == true ? { color: \"white\" } : { color: \"grey\" }]}>{text}</Text>\r\n        </TouchableOpacity>\r\n\r\n    )\r\n    handleCate = async (cate, index) => {\r\n        await this.setState({\r\n            selectedCate: cate,\r\n            numColored: index\r\n        })\r\n\r\n        await this._initDoc()\r\n    }\r\n    goToDetail = (index) => {\r\n        this.setState({ isVisible: true, imgIndex: index })\r\n    }\r\n\r\n    renderCardDoc = (id, docName, docDate, index) => (\r\n        <TouchableOpacity onPress={() => this.goToDetail(index)} key={index} style={{ flexDirection: \"column\", marginRight: wp(\"1%\") }}>\r\n            <View style={styles.docType}>\r\n                <Icon name=\"collections\" />\r\n            </View>\r\n            <Text style={styles.docName}>{docName}</Text>\r\n            <Text style={styles.docName}>{docDate}</Text>\r\n        </TouchableOpacity>\r\n    )\r\n\r\n    blabla = (id, docName, docDate, index) => (\r\n        <ListItem\r\n            key={index}\r\n            containerStyle={{ margin: 10 }}\r\n\r\n            title={docName}\r\n            subtitle={docDate}\r\n            leftIcon={<FontAwesomeIcon icon={faFileImage} />}\r\n            bottomDivider\r\n            rightElement={\r\n                <React.Fragment>\r\n                    <TouchableOpacity style={{ padding: 10 }} onPress={() => this.goToDetail(index)}>\r\n                        <FontAwesomeIcon icon={faEye} />\r\n                    </TouchableOpacity>\r\n                    <TouchableOpacity style={{ padding: 10 }} onPress={() => this.shareDoc(id)}>\r\n                        <FontAwesomeIcon icon={faShareAlt} />\r\n                    </TouchableOpacity>\r\n                    <TouchableOpacity style={{ padding: 10 }} onPress={() => this.deleteDoc(id)}>\r\n                        <FontAwesomeIcon icon={faTrash} />\r\n                    </TouchableOpacity>\r\n                </React.Fragment>\r\n            }\r\n        />\r\n    )\r\n\r\n    perform = (id) => {\r\n        this.setState({\r\n            selectedDoc: id,\r\n            modalVisible: true\r\n        })\r\n    }\r\n    shareDoc = async (id) => {\r\n        this.setState({ isLoading: true })\r\n        await this.getDoc(id)\r\n        const image_source = Bdd.pict_url + this.state.uri\r\n        FileSystem.downloadAsync(\r\n            image_source,\r\n            FileSystem.documentDirectory + \".jpg\"\r\n        )\r\n            .then(async ({ uri }) => {\r\n                console.log('Finished downloading to ', uri);\r\n\r\n                await Sharing.shareAsync(uri);\r\n\r\n                this.setState({ isLoading: false })\r\n            })\r\n\r\n\r\n\r\n    };\r\n    getDoc = async (id) => {\r\n        let data = {\r\n            id: id\r\n        }\r\n        axios.post(Bdd.api_url + \"/api/document/detail\", data)\r\n            .then((response) => {\r\n                this.setState({\r\n                    name_doc: response.data.document.nam,\r\n                    uri: response.data.document.url\r\n                })\r\n            })\r\n    }\r\n    deleteDoc(id) {\r\n\r\n\r\n        axios.delete(`${Bdd.api_url}/document/${id}`)\r\n            .then(async (response) => {\r\n                this.setState({isLoading : true})\r\n                await this._initDoc()\r\n                this.setState({isLoading : false})\r\n            })\r\n    }\r\n    render() {\r\n        const datas = [\r\n            {\r\n                type: \"Tous\", label: \"all\"\r\n            }, {\r\n                type: \"Mes ordonnances\", label: \"ordo\"\r\n            }, {\r\n                type: \"Mes certificats\", label: \"cart\"\r\n            }, {\r\n                type: \"Mes attestations\", label: \"atte\"\r\n            }, {\r\n                type: \"Mes comptes-rendus\", label: \"cptr\"\r\n            }, {\r\n                type: \"Autres\", label: \"aut\"\r\n            }\r\n\r\n        ]\r\n\r\n        return (\r\n            <View style={{ flex: 1 }}>\r\n                <ScrollView style={styles.container}>\r\n                    <View style={Platform.OS === 'ios' ? styles.under_ios : styles.under}>\r\n                        <TopMenu navigation={this.props.navigation} />\r\n                    </View>\r\n                    {this.state.isLoading && <View style={styles.loading_container}>\r\n                        <ActivityIndicator size=\"large\" />\r\n                    </View>}\r\n\r\n\r\n                    <View style={styles.categories}>\r\n                        <ScrollView indicatorStyle=\"white\" nestedScrollEnabled={true} horizontal={true}>\r\n                            {datas.map((data, i) => {\r\n                                return this.state.numColored === i ? this.renderCardCate(data.type, true, data.label, i) : this.renderCardCate(data.type, false, data.label, i)\r\n                            })}\r\n                        </ScrollView>\r\n                    </View>\r\n\r\n                    <View style={styles.docContainer}>\r\n\r\n                        <View style={styles.actionButton}>\r\n                            <TouchableOpacity\r\n                                style={{ marign: 5, padding: 10, backgroundColor: \"#008ac2\", }}\r\n                                onPress={() => this.props.navigation.navigate(\"Test\")}>\r\n                                <Text style={{ color: \"white\", textAlign: \"center\" }}>Ajouter un document</Text>\r\n                            </TouchableOpacity>\r\n\r\n                        </View>\r\n                        <View >\r\n                            <ScrollView>\r\n                                {this.state.documents.length !== 0 && this.state.documents.map((document, i) => {\r\n                                    const dataImg = { uri: document.typeDoc }\r\n                                    this.images.push(dataImg)\r\n                                    let name = document.nomDoc\r\n                                    let date = document.createdAt\r\n                                    return this.blabla(document.idDoc, name, date, i)\r\n                                })}\r\n                            </ScrollView>\r\n\r\n                        </View>\r\n\r\n                    </View>\r\n\r\n                </ScrollView>\r\n\r\n                <ImageView\r\n                    images={this.images}\r\n                    imageIndex={this.state.imgIndex}\r\n                    visible={this.state.isVisible}\r\n                    onRequestClose={() => this.setState({ isVisible: false })}\r\n                />\r\n\r\n                <BottomMenu navigation={this.props.navigation} />\r\n\r\n            </View>\r\n\r\n        )\r\n    }\r\n}\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n\r\n    },\r\n    centeredView: {\r\n        flex: 1,\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        marginTop: 22\r\n    },\r\n    modalView: {\r\n        margin: 20,\r\n        backgroundColor: \"white\",\r\n        borderRadius: 20,\r\n        padding: 35,\r\n        alignItems: \"center\",\r\n        shadowColor: \"#000\",\r\n        shadowOffset: {\r\n            width: 0,\r\n            height: 2\r\n        },\r\n        shadowOpacity: 0.25,\r\n        shadowRadius: 3.84,\r\n        elevation: 5\r\n    },\r\n    docType: {\r\n        backgroundColor: \"#4f9e9e\",\r\n        borderColor: \"grey\",\r\n        opacity: 0.5,\r\n        padding: wp(\"4%\"),\r\n        borderRadius: 12\r\n    },\r\n    docName: {\r\n        color: \"#d3d3d3\",\r\n        textAlign: \"center\"\r\n    },\r\n    docContainer: {\r\n        flexDirection: \"column\",\r\n        backgroundColor: \"white\",\r\n        borderRadius: 10,\r\n        height: hp(\"50%\"),\r\n        paddingTop: hp(\"1%\"),\r\n\r\n    },\r\n    btnAction: {\r\n        padding: wp(\"1%\"),\r\n        marginRight: wp(\"1%\"),\r\n        backgroundColor: \"#cad0db\",\r\n        borderRadius: 5\r\n    },\r\n    docItem: {\r\n        flexDirection: \"row\",\r\n        flexWrap: \"wrap\",\r\n        marginTop: hp(\"1%\"),\r\n\r\n        justifyContent: \"space-around\",\r\n\r\n\r\n    },\r\n    actionButton: {\r\n        flexDirection: \"row\",\r\n        justifyContent: \"flex-end\",\r\n\r\n    },\r\n    searchContainer: {\r\n        width: wp(\"100%\")\r\n    },\r\n    inputs: {\r\n        height: 45,\r\n        marginLeft: 16,\r\n        borderBottomColor: '#FFFFFF',\r\n        flex: 1,\r\n    },\r\n    cardContainer: {\r\n        height: hp(\"25%\"),\r\n        width: wp(\"70%\"),\r\n        borderRadius: 5,\r\n        paddingLeft: 10,\r\n        paddingRight: 5,\r\n        paddingTop: 20,\r\n        paddingBottom: 20,\r\n        borderColor: \"grey\",\r\n        //  backgroundColor: \"#008ac2\",\r\n        margin: 10,\r\n        shadowColor: \"#000\",\r\n        shadowOffset: {\r\n            width: 0,\r\n            height: 2\r\n        },\r\n        shadowOpacity: 0.25,\r\n        shadowRadius: 3.84,\r\n        elevation: 5\r\n    },\r\n    cardText: {\r\n        marginTop: 20,\r\n        marginLeft: 10,\r\n        color: \"grey\",\r\n        fontSize: 14,\r\n        textShadowColor: 'rgba(255, 255, 255, 0.75)',\r\n        textShadowOffset: { width: -1, height: 1 },\r\n        textShadowRadius: 10,\r\n        fontSize: 17\r\n    },\r\n    iconCard: {\r\n        color: \"grey\",\r\n\r\n    },\r\n    under: {\r\n\r\n        height: hp('10%'),\r\n        width: wp(\"100%\")\r\n        // zIndex: 2\r\n    },\r\n    under_ios: {\r\n        width: wp(\"100%\"),\r\n        height: hp('10%'),\r\n        zIndex: 2\r\n    },\r\n    loading_container: {\r\n        position: 'absolute',\r\n        zIndex: 10,\r\n        left: 0,\r\n        right: 0,\r\n        top: 100,\r\n        bottom: 0,\r\n        alignItems: 'center',\r\n        justifyContent: 'center'\r\n      }\r\n})\r\n\r\nconst mapStateToProps = (store) => {\r\n    return {\r\n        user: store.user,\r\n        /* contact: store.contact,\r\n        second: store.second */\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FileManager)"]},"metadata":{},"sourceType":"module"}