{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"E:\\\\Projets\\\\Acadys\\\\best4sante\\\\SanteV2\\\\assets\\\\Screens\\\\Samaritain\\\\UserConnected.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { Stylesheet } from \"react-native-web/dist/index\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport { connect } from 'react-redux';\nimport { _emitEvent, onSamaritainListChange, _setSocket, SocketService } from \"../../services/socket\";\nimport { getCurrentLocation, calculateDistanceBetween } from \"../../services/location\";\nimport Axios from 'axios';\nimport { TouchableOpacity, TouchableHighlight, TextInput } from 'react-native-gesture-handler';\nimport Bdd from \"../../API/Bdd\";\nimport { onlineUser } from \"../../Action\";\nimport { ListItem, Avatar, Accessory } from 'react-native-elements';\nimport { TouchableRipple } from 'react-native-paper';\nimport { FontAwesomeIcon } from '@fortawesome/react-native-fontawesome';\nimport { faUser } from '@fortawesome/free-solid-svg-icons';\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { widthPercentageToDP as wp, heightPercentageToDP as hp } from 'react-native-responsive-screen';\nimport Loader from \"../../component/loader\";\nimport HeaderMenu from \"../../component/Menu/HeaderMenu\";\nimport { Input } from 'native-base';\n\nvar UserConnected = function (_Component) {\n  _inherits(UserConnected, _Component);\n\n  var _super = _createSuper(UserConnected);\n\n  function UserConnected(props) {\n    var _this;\n\n    _classCallCheck(this, UserConnected);\n\n    _this = _super.call(this, props);\n\n    _this.getRecentRequest = function _callee2() {\n      return _regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(Axios.get(Bdd.api_url + \"/samaritain/list\").then(function _callee(res) {\n                return _regeneratorRuntime.async(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        _this.setState({\n                          samaritainRequest: res.data.data\n                        });\n\n                      case 1:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, null, null, null, Promise);\n              }));\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.getUserConnected = function _callee4() {\n      var socketSrv;\n      return _regeneratorRuntime.async(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              socketSrv = new SocketService(\"samaritain\");\n              socketSrv.onSamaritainListChange(function _callee3(userList) {\n                return _regeneratorRuntime.async(function _callee3$(_context3) {\n                  while (1) {\n                    switch (_context3.prev = _context3.next) {\n                      case 0:\n                        _this.props.onlineUser(userList);\n\n                      case 1:\n                      case \"end\":\n                        return _context3.stop();\n                    }\n                  }\n                }, null, null, null, Promise);\n              });\n\n            case 2:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.receiveSamaritainRequest = function () {\n      var socketSrv = new SocketService(\"samaritain\");\n      socketSrv.onNewSamaritainRequest(function _callee5(reqList) {\n        var a;\n        return _regeneratorRuntime.async(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                console.log(\"vaovao\", reqList);\n                a = _this.state.samaritainRequest;\n                a.unshift(reqList.data);\n\n                _this.setState({\n                  samaritainRequest: a\n                });\n\n              case 4:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, null, null, null, Promise);\n      });\n    };\n\n    _this.goToRespond = function (i) {\n      _this.props.navigation.navigate(\"UserResponded\", {\n        idSamaritain: i\n      });\n    };\n\n    _this.renderSamaritainRequest = function (id, i, name, details, travel, image) {\n      return React.createElement(TouchableOpacity, {\n        key: id,\n        onPress: function onPress() {\n          return _this.goToRespond(i);\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 9\n        }\n      }, React.createElement(ListItem, {\n        leftElement: React.createElement(Avatar, {\n          source: {\n            uri: image\n          },\n          rounded: true,\n          size: \"medium\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 37\n          }\n        }),\n        rightElement: React.createElement(Text, {\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 39\n          }\n        }, travel),\n        title: name,\n        subtitle: details,\n        titleStyle: {\n          fontWeight: '600'\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 21\n        }\n      }));\n    };\n\n    _this.renderOnlineUser = function (i, name, image) {\n      return React.createElement(TouchableOpacity, {\n        style: styles.userActiveContainer,\n        key: i,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 9\n        }\n      }, React.createElement(Avatar, {\n        source: {\n          uril: image\n        },\n        rounded: true,\n        size: \"medium\",\n        title: \"A\",\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 13\n        }\n      }), React.createElement(Text, {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 13\n        }\n      }, name));\n    };\n\n    _this.sendRequest = function _callee6() {\n      var idUser, data;\n      return _regeneratorRuntime.async(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              idUser = _this.props.user.user.idUser;\n              data = {\n                description: _this.description,\n                geoloc: _this.mylocation\n              };\n              _context6.next = 4;\n              return _regeneratorRuntime.awrap(Axios.post(Bdd.api_url + \"/samaritain/request?idUser=\" + idUser, data).then(function (res) {}).catch(function (err) {\n                console.log(\"error reuqest\", err);\n              }));\n\n            case 4:\n              _this.setState({\n                isVisible: false\n              });\n\n            case 5:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.state = {\n      userConnected: [],\n      samaritainRequest: [],\n      isLoading: false,\n      isVisible: false\n    };\n    _this.description = \"\";\n    _this.mylocation = \"\";\n    return _this;\n  }\n\n  _createClass(UserConnected, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var location;\n      return _regeneratorRuntime.async(function componentDidMount$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              this.setState({\n                isLoading: true\n              });\n              _context7.next = 3;\n              return _regeneratorRuntime.awrap(this.getUserConnected());\n\n            case 3:\n              _context7.next = 5;\n              return _regeneratorRuntime.awrap(this.getRecentRequest());\n\n            case 5:\n              this.receiveSamaritainRequest();\n              this.setState({\n                isLoading: false\n              });\n              _context7.next = 9;\n              return _regeneratorRuntime.awrap(getCurrentLocation());\n\n            case 9:\n              location = _context7.sent;\n              this.mylocation = location.coords.latitude + \",\" + location.coords.longitude;\n\n            case 11:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(View, {\n        style: {\n          flex: 1,\n          backgroundColor: \"white\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 13\n        }\n      }, React.createElement(Loader, {\n        loading: this.state.isLoading,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 17\n        }\n      }), React.createElement(View, {\n        style: {\n          height: hp(\"10%\")\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 17\n        }\n      }, React.createElement(HeaderMenu, {\n        navigation: this.props.navigation,\n        userConnected: 1,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 17\n        }\n      })), React.createElement(View, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 17\n        }\n      }, React.createElement(ScrollView, {\n        style: {\n          marginTop: 50\n        },\n        horizontal: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 17\n        }\n      }, this.props.user.online_users && this.props.user.online_users.map(function (user, i) {\n        return _this2.renderOnlineUser(i, user.nomUser, user.imageUser);\n      }))), React.createElement(View, {\n        style: {\n          maxHeight: hp(\"70%\")\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 17\n        }\n      }, React.createElement(Modal, {\n        animationType: \"slide\",\n        transparent: true,\n        visible: this.state.isVisible,\n        onRequestClose: function onRequestClose() {\n          Alert.alert(\"Modal has been closed.\");\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 17\n        }\n      }, React.createElement(View, {\n        style: styles.centeredView,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 9\n        }\n      }, React.createElement(View, {\n        style: styles.modalView,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 11\n        }\n      }, React.createElement(Text, {\n        style: styles.modalText,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 13\n        }\n      }, \"Fa\\xEEtes appel aux \\\"Bons Samaritains\\\"\"), React.createElement(Text, {\n        style: styles.modalDesc,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 13\n        }\n      }, \"Les utilisateurs \\\"Bons Samaritains\\\" pr\\xE8s de chez vous seront alert\\xE9s en temps r\\xE9el et prendra en compte votre demande\"), React.createElement(TextInput, {\n        returnKeyType: \"done\",\n        style: styles.modalInput,\n        placeholder: \"Une petite description de votre cas\",\n        onChangeText: function onChangeText(text) {\n          return _this2.description = text;\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 13\n        }\n      }), React.createElement(Text, {\n        style: styles.buttonContainer,\n        onPress: function onPress() {\n          return _this2.sendRequest();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 13\n        }\n      }, \"Lancer ma demande\"), React.createElement(Text, {\n        style: [styles.buttonContainer, {\n          backgroundColor: \"white\",\n          color: \"#008ac8\"\n        }],\n        onPress: function onPress() {\n          return _this2.setState({\n            isVisible: false\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 13\n        }\n      }, \"Pas maintenant\")))), React.createElement(View, {\n        style: styles.titleContainer,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 21\n        }\n      }, React.createElement(Text, {\n        style: styles.title,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 25\n        }\n      }, \"Retrouver ici les demandes de secours par les utilisateurs. Soyez le premier \\xE0 intervenir\"), React.createElement(View, {\n        style: styles.launch,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 29\n        }\n      }, React.createElement(TouchableOpacity, {\n        style: styles.buttonContainer2,\n        onPress: function onPress() {\n          return _this2.setState({\n            isVisible: true\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 29\n        }\n      }, React.createElement(Text, {\n        style: {\n          textAlign: \"center\",\n          color: \"white\",\n          fontWeight: \"bold\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 33\n        }\n      }, \"Demander de l'aide\")))), React.createElement(ScrollView, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 21\n        }\n      }, this.state.samaritainRequest && this.state.samaritainRequest.map(function (user, i) {\n        var name = user.userRequested.nomUser + \" \" + user.userRequested.prenomUser;\n        var nom = user.userRequested.idUser === _this2.props.user.user.idUser ? \"Vous\" : name;\n        return _this2.renderSamaritainRequest(i, user.idSamaritain, nom, user.description, \"\", user.userRequested.imageUser);\n      }))));\n    }\n  }]);\n\n  return UserConnected;\n}(Component);\n\nvar styles = StyleSheet.create({\n  userActiveContainer: {\n    alignItems: \"center\",\n    paddingVertical: hp(\"1%\"),\n    paddingHorizontal: wp(\"1%\"),\n    marginHorizontal: wp(\"1%\")\n  },\n  launch: {\n    padding: 10\n  },\n  titleContainer: {\n    padding: hp(\"2%\")\n  },\n  title: {\n    fontSize: 18,\n    fontWeight: \"200\",\n    textAlign: 'center',\n    color: 'gray'\n  },\n  centeredView: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    marginTop: 22\n  },\n  modalView: {\n    margin: 20,\n    backgroundColor: \"white\",\n    width: wp(\"90%\"),\n    height: hp(\"60%\"),\n    padding: 35,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    shadowColor: \"#000\",\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: .9,\n    shadowRadius: 3.84,\n    elevation: 100\n  },\n  openButton: {\n    backgroundColor: \"#F194FF\",\n    borderRadius: 20,\n    padding: 10,\n    elevation: 2\n  },\n  textStyle: {\n    color: \"white\",\n    fontWeight: \"bold\",\n    textAlign: \"center\"\n  },\n  modalText: {\n    fontSize: 18,\n    fontWeight: \"bold\",\n    textAlign: \"center\"\n  },\n  modalInput: {\n    borderBottomWidth: 2,\n    borderBottomColor: \"#00C1B4\",\n    marginBottom: hp(\"2%\"),\n    fontSize: 16\n  },\n  modalDesc: {\n    fontSize: 15,\n    fontStyle: \"italic\",\n    marginBottom: 15,\n    textAlign: \"center\"\n  },\n  buttonContainer: {\n    textAlign: \"center\",\n    padding: 10,\n    color: \"white\",\n    width: \"100%\",\n    borderRadius: 10,\n    backgroundColor: \"#008ac8\"\n  },\n  buttonContainer2: {\n    textAlign: \"center\",\n    padding: 10,\n    color: \"white\",\n    width: \"100%\",\n    borderRadius: 10,\n    backgroundColor: \"#008ac8\"\n  }\n});\n\nvar mapStateToProps = function mapStateToProps(store) {\n  return {\n    online_users: store.online_users,\n    user: store.user,\n    contact: store.contact,\n    second: store.second\n  };\n};\n\nvar mapDispatchToProps = {\n  onlineUser: onlineUser\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(UserConnected);","map":{"version":3,"sources":["E:/Projets/Acadys/best4sante/SanteV2/assets/Screens/Samaritain/UserConnected.js"],"names":["React","Component","Stylesheet","connect","_emitEvent","onSamaritainListChange","_setSocket","SocketService","getCurrentLocation","calculateDistanceBetween","Axios","TouchableOpacity","TouchableHighlight","TextInput","Bdd","onlineUser","ListItem","Avatar","Accessory","TouchableRipple","FontAwesomeIcon","faUser","widthPercentageToDP","wp","heightPercentageToDP","hp","Loader","HeaderMenu","Input","UserConnected","props","getRecentRequest","get","api_url","then","res","setState","samaritainRequest","data","getUserConnected","socketSrv","userList","receiveSamaritainRequest","onNewSamaritainRequest","reqList","console","log","a","state","unshift","goToRespond","i","navigation","navigate","idSamaritain","renderSamaritainRequest","id","name","details","travel","image","uri","fontWeight","renderOnlineUser","styles","userActiveContainer","uril","sendRequest","idUser","user","description","geoloc","mylocation","post","catch","err","isVisible","userConnected","isLoading","location","coords","latitude","longitude","flex","backgroundColor","height","marginTop","online_users","map","nomUser","imageUser","maxHeight","Alert","alert","centeredView","modalView","modalText","modalDesc","modalInput","text","buttonContainer","color","titleContainer","title","launch","buttonContainer2","textAlign","userRequested","prenomUser","nom","StyleSheet","create","alignItems","paddingVertical","paddingHorizontal","marginHorizontal","padding","fontSize","justifyContent","margin","width","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation","openButton","borderRadius","textStyle","borderBottomWidth","borderBottomColor","marginBottom","fontStyle","mapStateToProps","store","contact","second","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { Text, View,Stylesheet,Modal } from 'react-native'\r\nimport { connect } from 'react-redux'\r\nimport { _emitEvent, onSamaritainListChange, _setSocket, SocketService } from '../../services/socket'\r\nimport { getCurrentLocation, calculateDistanceBetween } from '../../services/location'\r\nimport Axios from 'axios'\r\nimport { TouchableOpacity, TouchableHighlight, TextInput } from 'react-native-gesture-handler'\r\nimport Bdd from '../../API/Bdd'\r\nimport { onlineUser } from '../../Action'\r\nimport { ListItem, Avatar,Accessory } from 'react-native-elements'\r\nimport { TouchableRipple } from 'react-native-paper'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-native-fontawesome'\r\nimport { faUser } from '@fortawesome/free-solid-svg-icons'\r\nimport { ScrollView } from 'react-native'\r\nimport { StyleSheet } from 'react-native'\r\nimport {\r\n    widthPercentageToDP as wp,\r\n    heightPercentageToDP as hp,\r\n} from 'react-native-responsive-screen'\r\nimport Loader from '../../component/loader'\r\nimport HeaderMenu from \"../../component/Menu/HeaderMenu\"\r\nimport {Input} from 'native-base';\r\n\r\nclass UserConnected extends Component {\r\n\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            userConnected: [],\r\n            samaritainRequest : [],\r\n            isLoading: false,\r\n            isVisible : false,\r\n        }\r\n        this.description = \"\"\r\n        this.mylocation = \"\"\r\n        \r\n    }\r\n\r\n    async componentDidMount() {\r\n        this.setState({ isLoading: true })\r\n        await this.getUserConnected()\r\n         await this.getRecentRequest()\r\n         this.receiveSamaritainRequest()\r\n        this.setState({ isLoading: false })\r\n\r\n        let location = await getCurrentLocation()\r\n         this.mylocation =  location.coords.latitude+\",\"+location.coords.longitude\r\n\r\n        //  let travel = await calculateDistanceBetween(\"-21.3464502,43.6679968\",\"-23.3464502,43.6679968\")\r\n        //  console.log(travel)\r\n       \r\n    }\r\n\r\n    getRecentRequest  =async() =>{\r\n        await Axios.get(`${Bdd.api_url}/samaritain/list`)\r\n            .then(async res=>{\r\n                \r\n                this.setState({samaritainRequest : res.data.data})\r\n            })\r\n    }\r\n\r\n\r\n    getUserConnected = async () => {\r\n  \r\n        let socketSrv = new SocketService(\"samaritain\")\r\n            socketSrv.onSamaritainListChange(async (userList) => {\r\n                this.props.onlineUser(userList)\r\n            })\r\n      \r\n    }\r\n\r\n    receiveSamaritainRequest = () =>{\r\n        let socketSrv = new SocketService(\"samaritain\")\r\n        socketSrv.onNewSamaritainRequest(async(reqList) =>{\r\n            console.log(\"vaovao\",reqList)\r\n            let a= this.state.samaritainRequest\r\n            a.unshift(reqList.data)\r\n            \r\n            this.setState({samaritainRequest : a})\r\n        })\r\n    }\r\n\r\n    goToRespond = (i) =>{\r\n        this.props.navigation.navigate(\"UserResponded\",{idSamaritain : i})\r\n    }\r\n\r\n \r\n\r\n    renderSamaritainRequest =  (id,i, name, details,travel,image) => (\r\n        <TouchableOpacity key={id} onPress={()=>this.goToRespond(i)} >\r\n                    <ListItem\r\n                       leftElement={<Avatar source={{uri : image}} rounded size=\"medium\" />}\r\n                        rightElement={<Text>{travel}</Text>}\r\n                        title={name}\r\n                        subtitle={details}\r\n                        titleStyle={{ fontWeight: '600' }}\r\n                    />\r\n        </TouchableOpacity>\r\n    )\r\n\r\n    renderOnlineUser = (i,name,image) => (\r\n        \r\n        <TouchableOpacity style={styles.userActiveContainer} key={i} >\r\n            <Avatar source={{uril : image}} rounded size=\"medium\" title=\"A\"  />\r\n            <Text >{name}</Text>\r\n        </TouchableOpacity>\r\n        \r\n    )\r\n\r\n    sendRequest = async () => {\r\n        \r\n       \r\n        let idUser = this.props.user.user.idUser\r\n        let data = {\r\n            description  : this.description,\r\n             geoloc : this.mylocation\r\n        }\r\n        await Axios.post(`${Bdd.api_url}/samaritain/request?idUser=${idUser}`,data)\r\n            .then(res=>{\r\n                // console.log(res.data)\r\n            })\r\n            .catch(err =>{\r\n                console.log(\"error reuqest\", err)\r\n            })\r\n        \r\n        this.setState({isVisible : false})\r\n    }\r\n\r\n\r\n    render() {\r\n\r\n        return (\r\n            <View style={{ flex: 1, backgroundColor : \"white\" }}>\r\n                {/* {this.state.isLoading === true && <Text>\r\n                    Veuillez patientez...\r\n                </Text>} */}\r\n\r\n                <Loader loading={this.state.isLoading} />\r\n                \r\n                <View style={{height: hp(\"10%\")}}>\r\n                <HeaderMenu navigation={this.props.navigation} userConnected={1}/>\r\n                </View>\r\n\r\n                <View>\r\n               \r\n                <ScrollView style={{marginTop : 50}} horizontal={true}>\r\n                {this.props.user.online_users && this.props.user.online_users.map((user, i) => {\r\n                    return this.renderOnlineUser(i,user.nomUser, user.imageUser)\r\n                })}\r\n                </ScrollView>\r\n\r\n                </View>\r\n\r\n                <View style={{maxHeight : hp(\"70%\")}}>\r\n                \r\n                    \r\n                <Modal\r\n        animationType=\"slide\"\r\n        transparent={true}\r\n        visible={this.state.isVisible}\r\n        onRequestClose={() => {\r\n          Alert.alert(\"Modal has been closed.\");\r\n        }}\r\n      >\r\n        <View style={styles.centeredView}>\r\n          <View style={styles.modalView}>\r\n            <Text style={styles.modalText}>Faîtes appel aux \"Bons Samaritains\"</Text>\r\n            <Text style={styles.modalDesc}>Les utilisateurs \"Bons Samaritains\" près de chez vous seront alertés en temps réel\r\n                et prendra en compte votre demande\r\n            </Text>\r\n            <TextInput returnKeyType=\"done\" style={styles.modalInput} placeholder=\"Une petite description de votre cas\" onChangeText={(text) => this.description = text} />\r\n            <Text style={styles.buttonContainer} onPress={()=> this.sendRequest()}>Lancer ma demande</Text>\r\n            <Text style={[styles.buttonContainer,{backgroundColor : \"white\",color : \"#008ac8\"}]} onPress={()=> this.setState({isVisible : false})}>Pas maintenant</Text>\r\n\r\n          </View>\r\n        </View>\r\n      </Modal>      \r\n      \r\n                    <View style={styles.titleContainer}>\r\n\r\n                        <Text style={styles.title}>\r\n                            Retrouver ici les demandes de secours par les utilisateurs. \r\n                            Soyez le premier à intervenir\r\n                            </Text>\r\n\r\n                            <View style={styles.launch}>\r\n                            <TouchableOpacity style={styles.buttonContainer2} onPress={() =>this.setState({isVisible : true})}>\r\n                                <Text style={{textAlign : \"center\",color : \"white\",fontWeight :\"bold\"}} >Demander de l'aide</Text>\r\n                            </TouchableOpacity>\r\n                            </View>\r\n                    </View>\r\n\r\n                    <ScrollView>\r\n                    {this.state.samaritainRequest && this.state.samaritainRequest.map((user, i) => {\r\n                        const name = user.userRequested.nomUser+\" \"+user.userRequested.prenomUser\r\n                        const nom = user.userRequested.idUser === this.props.user.user.idUser ? \"Vous\" : name \r\n                        \r\n                    //    const travel  = calculateDistanceBetween(user.g)\r\n                    return this.renderSamaritainRequest(i,user.idSamaritain,nom,user.description,\"\",user.userRequested.imageUser)\r\n                })}\r\n                    </ScrollView>\r\n                </View>\r\n               \r\n            </View>\r\n        )\r\n    }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    userActiveContainer : {\r\n        alignItems : \"center\",\r\n        paddingVertical : hp(\"1%\"),\r\n        paddingHorizontal : wp(\"1%\"),\r\n        marginHorizontal : wp(\"1%\")\r\n    },\r\n    launch : {\r\n        padding : 10,\r\n       \r\n       \r\n    },\r\n    titleContainer : {\r\n        padding : hp(\"2%\")\r\n    },\r\n    title : {\r\n        fontSize : 18,\r\n        fontWeight : \"200\",\r\n        textAlign: 'center',\r\n        color: 'gray'\r\n    },\r\n    centeredView: {\r\n        flex: 1,\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        marginTop: 22\r\n      },\r\n      modalView: {\r\n        margin: 20,\r\n        backgroundColor: \"white\",\r\n        width : wp(\"90%\"),\r\n        height : hp(\"60%\"),\r\n        padding: 35,\r\n        alignItems: \"center\",\r\n        justifyContent : \"center\",\r\n        shadowColor: \"#000\",\r\n        shadowOffset: {\r\n          width: 0,\r\n          height: 2\r\n        },\r\n        shadowOpacity: .9,\r\n        shadowRadius: 3.84,\r\n        elevation: 100\r\n      },\r\n      openButton: {\r\n        backgroundColor: \"#F194FF\",\r\n        borderRadius: 20,\r\n        padding: 10,\r\n        elevation: 2\r\n      },\r\n      textStyle: {\r\n        color: \"white\",\r\n        fontWeight: \"bold\",\r\n        textAlign: \"center\"\r\n      },\r\n      modalText: {\r\n          fontSize : 18,\r\n          fontWeight : \"bold\",\r\n        \r\n        textAlign: \"center\"\r\n      },\r\n      modalInput : {\r\n          borderBottomWidth : 2,\r\n          borderBottomColor : \"#00C1B4\",\r\n          marginBottom : hp(\"2%\"),\r\n          fontSize: 16\r\n      },\r\n      modalDesc : {\r\n          fontSize : 15,\r\n          fontStyle : \"italic\",\r\n          marginBottom: 15,\r\n          textAlign : \"center\"\r\n      },\r\n      buttonContainer: {\r\n      \r\n        textAlign : \"center\",\r\n        padding : 10,\r\n\r\n        color : \"white\",\r\n        width: \"100%\",\r\n        borderRadius: 10,\r\n        backgroundColor: \"#008ac8\",\r\n       \r\n      },\r\n      buttonContainer2: {\r\n      \r\n        textAlign : \"center\",\r\n        padding : 10,\r\n\r\n        color : \"white\",\r\n        width: \"100%\",\r\n        borderRadius: 10,\r\n        backgroundColor: \"#008ac8\",\r\n       \r\n      },\r\n})\r\n\r\nconst mapStateToProps = (store) => {\r\n    return {\r\n        online_users: store.online_users,\r\n        user: store.user,\r\n        contact: store.contact,\r\n        second: store.second\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    onlineUser\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UserConnected)\r\n"]},"metadata":{},"sourceType":"module"}