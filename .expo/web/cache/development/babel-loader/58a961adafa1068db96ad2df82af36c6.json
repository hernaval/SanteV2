{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\Users\\\\Stenny Gabriel\\\\best4sante\\\\Best4Sante\\\\assets\\\\Screens\\\\Profiles\\\\MySecondProfil.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { connect } from 'react-redux';\nimport TopMenu from \"../../component/Menu/TopMenu\";\nimport { Avatar, Divider, ListItem } from 'react-native-elements';\nimport { FontAwesomeIcon } from '@fortawesome/react-native-fontawesome';\nimport { faHome, faBars, faTimes, faCaretDown, faChevronRight, faEdit, faUmbrella, faUserAlt, faClinicMedical, faFileMedicalAlt, faUserCircle, faUsers, faExclamationCircle, faUser, faArrowDown, faArrowUp, faChevronDown, faTrashAlt, faCheck } from '@fortawesome/free-solid-svg-icons';\nimport { widthPercentageToDP as wp, heightPercentageToDP as hp } from 'react-native-responsive-screen';\nimport { deleteSecondProfil, setIndexSelected } from \"../../Action\";\nimport ActionButton from 'react-native-action-button';\nimport axios from \"axios\";\nimport Bdd from \"../../API/Bdd\";\nimport { ScrollView } from 'react-native-gesture-handler';\n\nvar MySecondProfil = function (_Component) {\n  _inherits(MySecondProfil, _Component);\n\n  var _super = _createSuper(MySecondProfil);\n\n  function MySecondProfil() {\n    var _this;\n\n    _classCallCheck(this, MySecondProfil);\n\n    _this = _super.call(this);\n\n    _this.fetchSecond = function () {\n      var idUser = _this.props.user.user.idUser;\n      axios.get(Bdd.api_url_second + \"/list?idUser=\" + idUser).then(function (res) {\n        return _this.setState({\n          secondUser: res.data.data\n        });\n      });\n    };\n\n    _this.renderItem = function (index, fullname, lien, iniital) {\n      return React.createElement(ListItem, {\n        containerStyle: {\n          margin: 10\n        },\n        title: fullname,\n        subtitle: lien,\n        leftAvatar: {\n          title: iniital\n        },\n        bottomDivider: true,\n        rightElement: React.createElement(TouchableOpacity, {\n          onPress: function onPress() {\n            return _this._toggleAction(index);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 17\n          }\n        }, React.createElement(FontAwesomeIcon, {\n          size: 21,\n          color: \"grey\",\n          icon: _this.state.actionIndex === index ? faChevronDown : faChevronRight,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 21\n          }\n        })),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 9\n        }\n      });\n    };\n\n    _this._toggleAction = function (index) {\n      _this.state.actionIndex === index ? _this.setState({\n        actionIndex: -1\n      }) : _this.setState({\n        actionIndex: index\n      });\n    };\n\n    _this.renderAction = function (idUser, index) {\n      return React.createElement(View, {\n        style: {\n          flexDirection: \"row\",\n          justifyContent: \"space-evenly\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 9\n        }\n      }, React.createElement(View, {\n        style: {\n          justifyContent: \"center\",\n          alignItems: \"center\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }\n      }, React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return _this.deleteSecondProfil(idUser);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 17\n        }\n      }, React.createElement(FontAwesomeIcon, {\n        icon: faTrashAlt,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 21\n        }\n      }), React.createElement(Text, {\n        style: {\n          textAlign: \"center\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }\n      }, \"Supprimer\"))), React.createElement(View, {\n        style: {\n          justifyContent: \"center\",\n          alignItems: \"center\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }\n      }, React.createElement(TouchableOpacity, {\n        onPress: function _callee() {\n          return _regeneratorRuntime.async(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.next = 2;\n                  return _regeneratorRuntime.awrap(_this.onChangeSelectedName(index));\n\n                case 2:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, null, null, null, Promise);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 17\n        }\n      }, React.createElement(FontAwesomeIcon, {\n        icon: faCheck,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 21\n        }\n      }), React.createElement(Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }\n      }, \"Modifier\"))));\n    };\n\n    _this.state = {\n      isLoading: false,\n      secondUser: [],\n      actionIndex: -1\n    };\n    return _this;\n  }\n\n  _createClass(MySecondProfil, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.fetchSecond();\n    }\n  }, {\n    key: \"onChangeSelectedName\",\n    value: function onChangeSelectedName(index) {\n      var selected;\n      return _regeneratorRuntime.async(function onChangeSelectedName$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              selected = this.props.second.second_users[index].firstName + ' ' + this.props.second.second_users[index].lastName;\n              this.setState({\n                selected: selected,\n                isSelectedProfile: false\n              });\n              _context2.next = 4;\n              return _regeneratorRuntime.awrap(this.props.setIndexSelected(index));\n\n            case 4:\n              this.props.navigation.navigate(\"MyProfil\");\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"deleteSecondProfil\",\n    value: function deleteSecondProfil(idUser) {\n      var _this2 = this;\n\n      axios.delete(Bdd.api_url_second + \"/\" + idUser).then(function (response) {\n        _this2.fetchSecond();\n\n        _this2.setState({\n          actionIndex: -1\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(View, {\n        style: styles.container,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 13\n        }\n      }, this.state.isLoading && React.createElement(View, {\n        style: styles.loading_container,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 42\n        }\n      }, React.createElement(ActivityIndicator, {\n        size: \"large\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 21\n        }\n      })), React.createElement(View, {\n        style: Platform.OS === 'ios' ? styles.under_ios : styles.under,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 17\n        }\n      }, React.createElement(TopMenu, {\n        navigation: this.props.navigation,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 21\n        }\n      })), React.createElement(View, {\n        style: styles.profilContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 17\n        }\n      }, React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 21\n        }\n      }, React.createElement(Text, {\n        style: {\n          textAlign: \"center\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 25\n        }\n      }, \"Mes comptes secondaires\")), React.createElement(ScrollView, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 21\n        }\n      }, this.state.secondUser !== null && this.state.secondUser.map(function (profil, index) {\n        var name = profil.nomSecondUser;\n        var lien = profil.lienSecondUser;\n        var fullname = name + \" \" + profil.prenomSecondUser;\n        var inital = profil.nomSecondUser[0] + profil.prenomSecondUser[0];\n        return React.createElement(View, {\n          key: index,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 33\n          }\n        }, _this3.renderItem(index, fullname, lien, inital), _this3.state.actionIndex === index && _this3.renderAction(profil.idSecondUser, index));\n      }))), React.createElement(ActionButton, {\n        onPress: function onPress() {\n          return _this3.props.navigation.navigate(\"SecondAdd\");\n        },\n        style: {\n          marginBottom: 5\n        },\n        buttonColor: \"#008AC8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 17\n        }\n      }));\n    }\n  }]);\n\n  return MySecondProfil;\n}(Component);\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"white\"\n  },\n  profilContainer: {\n    justifyContent: \"center\",\n    marginTop: hp(\"7%\")\n  }\n});\n\nvar mapStateToProps = function mapStateToProps(store) {\n  return {\n    user: store.user,\n    contact: store.contact,\n    second: store.second\n  };\n};\n\nvar mapDispatchToProps = {\n  deleteSecondProfil: deleteSecondProfil,\n  setIndexSelected: setIndexSelected\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(MySecondProfil);","map":{"version":3,"sources":["C:/Users/Stenny Gabriel/best4sante/Best4Sante/assets/Screens/Profiles/MySecondProfil.js"],"names":["React","Component","connect","TopMenu","Avatar","Divider","ListItem","FontAwesomeIcon","faHome","faBars","faTimes","faCaretDown","faChevronRight","faEdit","faUmbrella","faUserAlt","faClinicMedical","faFileMedicalAlt","faUserCircle","faUsers","faExclamationCircle","faUser","faArrowDown","faArrowUp","faChevronDown","faTrashAlt","faCheck","widthPercentageToDP","wp","heightPercentageToDP","hp","deleteSecondProfil","setIndexSelected","ActionButton","axios","Bdd","ScrollView","MySecondProfil","fetchSecond","idUser","props","user","get","api_url_second","then","res","setState","secondUser","data","renderItem","index","fullname","lien","iniital","margin","title","_toggleAction","state","actionIndex","renderAction","flexDirection","justifyContent","alignItems","textAlign","onChangeSelectedName","isLoading","selected","second","second_users","firstName","lastName","isSelectedProfile","navigation","navigate","delete","response","styles","container","loading_container","Platform","OS","under_ios","under","profilContainer","map","profil","name","nomSecondUser","lienSecondUser","prenomSecondUser","inital","idSecondUser","marginBottom","StyleSheet","create","flex","backgroundColor","marginTop","mapStateToProps","store","contact","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { Text, View, StyleSheet, ActivityIndicator, TouchableOpacity } from 'react-native'\r\nimport { connect } from 'react-redux'\r\nimport TopMenu from \"../../component/Menu/TopMenu\"\r\nimport { Avatar, Divider, ListItem } from 'react-native-elements';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-native-fontawesome';\r\nimport { faHome, faBars, faTimes, faCaretDown, faChevronRight, faEdit, faUmbrella, faUserAlt, faClinicMedical, faFileMedicalAlt, faUserCircle, faUsers, faExclamationCircle, faUser, faArrowDown, faArrowUp, faChevronDown, faTrashAlt, faCheck } from '@fortawesome/free-solid-svg-icons';\r\nimport {\r\n    widthPercentageToDP as wp,\r\n    heightPercentageToDP as hp,\r\n} from 'react-native-responsive-screen'\r\nimport { deleteSecondProfil, setIndexSelected } from \"../../Action\";\r\nimport ActionButton from 'react-native-action-button';\r\nimport axios from \"axios\"\r\nimport Bdd from \"../../API/Bdd\"\r\nimport { ScrollView } from 'react-native-gesture-handler';\r\nclass MySecondProfil extends Component {\r\n\r\n    constructor() {\r\n        super()\r\n        this.state = {\r\n            isLoading: false,\r\n            secondUser: [],\r\n\r\n            actionIndex: -1\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.fetchSecond()\r\n    }\r\n\r\n    fetchSecond = () => {\r\n        let idUser = this.props.user.user.idUser\r\n        axios.get(`${Bdd.api_url_second}/list?idUser=${idUser}`)\r\n            .then(\r\n                (res) => this.setState({ secondUser: res.data.data })\r\n            )\r\n    }\r\n\r\n\r\n    renderItem = (index, fullname, lien, iniital) => (\r\n\r\n        <ListItem\r\n            containerStyle={{ margin: 10 }}\r\n\r\n            title={fullname}\r\n            subtitle={lien}\r\n            leftAvatar={{\r\n\r\n                title: iniital\r\n            }}\r\n            bottomDivider\r\n            rightElement={\r\n                <TouchableOpacity onPress={() => this._toggleAction(index)}>\r\n                    <FontAwesomeIcon size={21} color=\"grey\" icon={this.state.actionIndex === index ? faChevronDown : faChevronRight} />\r\n                </TouchableOpacity>\r\n            }\r\n\r\n        />\r\n\r\n\r\n    )\r\n    async onChangeSelectedName(index) {\r\n\r\n        let selected = this.props.second.second_users[index].firstName + ' ' + this.props.second.second_users[index].lastName\r\n        this.setState({ selected: selected, isSelectedProfile: false })\r\n        await this.props.setIndexSelected(index);\r\n\r\n        this.props.navigation.navigate(\"MyProfil\")\r\n\r\n    }\r\n\r\n\r\n    _toggleAction = (index) => {\r\n        this.state.actionIndex === index ? this.setState({ actionIndex: -1 })\r\n            : this.setState({ actionIndex: index })\r\n    }\r\n\r\n    renderAction = (idUser, index) => (\r\n        <View style={{ flexDirection: \"row\", justifyContent: \"space-evenly\" }}>\r\n\r\n\r\n            <View style={{ justifyContent: \"center\", alignItems: \"center\" }}>\r\n                <TouchableOpacity onPress={() => this.deleteSecondProfil(idUser)}>\r\n                    <FontAwesomeIcon icon={faTrashAlt} />\r\n                    <Text style={{textAlign : \"center\"}}>Supprimer</Text>\r\n                </TouchableOpacity>\r\n                \r\n            </View>\r\n\r\n            <View style={{ justifyContent: \"center\", alignItems: \"center\" }}>\r\n                <TouchableOpacity onPress={async () => {\r\n                    await this.onChangeSelectedName(index)\r\n                }}>\r\n                    <FontAwesomeIcon icon={faCheck} />\r\n                    <Text>Modifier</Text>\r\n                </TouchableOpacity>\r\n                \r\n            </View>\r\n\r\n        </View>\r\n    )\r\n    deleteSecondProfil(idUser){\r\n        axios.delete(`${Bdd.api_url_second}/${idUser}`)\r\n\t\t\t.then(response => {\r\n                this.fetchSecond()\r\n                this.setState({actionIndex : -1})\r\n\t\t\t})\r\n    }\r\n    render() {\r\n        return (\r\n            <View style={styles.container}>\r\n                {this.state.isLoading && <View style={styles.loading_container}>\r\n                    <ActivityIndicator size=\"large\" />\r\n                </View>}\r\n\r\n                <View style={Platform.OS === 'ios' ? styles.under_ios : styles.under}>\r\n                    <TopMenu navigation={this.props.navigation} />\r\n                </View>\r\n\r\n                <View style={styles.profilContainer}>\r\n                    <View>\r\n                        <Text style={{ textAlign: \"center\" }}>Mes comptes secondaires</Text>\r\n                    </View>\r\n\r\n                    <ScrollView>\r\n                        {this.state.secondUser !== null && this.state.secondUser.map((profil, index) => {\r\n                            const name = profil.nomSecondUser\r\n                            const lien = profil.lienSecondUser\r\n                            const fullname = name + \" \" + profil.prenomSecondUser\r\n                            const inital = profil.nomSecondUser[0] + profil.prenomSecondUser[0]\r\n                            return (\r\n                                <View key={index}>\r\n                                    {this.renderItem(index, fullname, lien, inital)}\r\n\r\n                                    {this.state.actionIndex === index && this.renderAction(profil.idSecondUser, index)}\r\n                                </View>\r\n                            )\r\n                        })}\r\n                    </ScrollView>\r\n\r\n\r\n                </View>\r\n                <ActionButton onPress={() => this.props.navigation.navigate(\"SecondAdd\")} style={{ marginBottom: 5 }} buttonColor=\"#008AC8\">\r\n\r\n                </ActionButton>\r\n            </View>\r\n        )\r\n    }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1,\r\n        backgroundColor: \"white\",\r\n\r\n    },\r\n    profilContainer: {\r\n        justifyContent: \"center\",\r\n        marginTop: hp(\"7%\")\r\n    }\r\n})\r\n\r\nconst mapStateToProps = (store) => {\r\n    return {\r\n        user: store.user,\r\n        contact: store.contact,\r\n        second: store.second\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    deleteSecondProfil,\r\n    setIndexSelected\r\n}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MySecondProfil)\r\n\r\n"]},"metadata":{},"sourceType":"module"}